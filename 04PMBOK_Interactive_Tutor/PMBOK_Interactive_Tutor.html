<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PMBOK 十大領域互動導師</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0fdf4;
        }
        .card-flip {
            perspective: 1000px;
        }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .card-flip:hover .card-inner {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 0.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        .card-back {
            transform: rotateY(180deg);
            background-color: #ffffff;
            overflow-y: auto;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const data = [
            {
                id: 1,
                area: "整合管理 (Integration)",
                category: "核心大腦",
                icon: "fa-brain",
                color: "bg-purple-600",
                keywords: ["協調", "統一", "唯一貫穿全流程", "授權"],
                desc: "十大領域之首，負責協調其他九個領域。確保專案目標一致，處理變更與介面衝突。",
                metaphor: "【餐廳店長】負責協調內外場，確保出餐順利，處理突發狀況，是整個餐廳的總指揮。"
            },
            {
                id: 2,
                area: "範疇管理 (Scope)",
                category: "黃金鐵三角",
                icon: "fa-list-check",
                color: "bg-blue-600",
                keywords: ["只做該做的事", "WBS", "範疇蔓延", "需求"],
                desc: "確保專案包含所有該做的工作，且「只做」該做的工作。防止未經核准的擴張。",
                metaphor: "【菜單設計】決定餐廳賣什麼、不賣什麼。如果不控制，廚師會隨便加菜（範疇蔓延），導致成本失控。"
            },
            {
                id: 3,
                area: "時程管理 (Schedule)",
                category: "黃金鐵三角",
                icon: "fa-clock",
                color: "bg-blue-600",
                keywords: ["準時", "活動排序", "要徑法", "工期估算"],
                desc: "確保專案如期完成。涉及活動定義、排序及持續時間估算。",
                metaphor: "【營業時間與上菜速度】確保前菜、主餐、甜點按順序上桌，並在客人不耐煩前完成服務。"
            },
            {
                id: 4,
                area: "成本管理 (Cost)",
                category: "黃金鐵三角",
                icon: "fa-coins",
                color: "bg-blue-600",
                keywords: ["預算", "實獲值 (EVM)", "資金", "成本控制"],
                desc: "在核定預算內完成專案。核心工具是「實獲值管理 (EVM)」。",
                metaphor: "【財務預算】控制食材成本、房租與薪水。每天結算有沒有虧錢，確保餐廳有利潤。"
            },
            {
                id: 5,
                area: "品質管理 (Quality)",
                category: "輔助支撐",
                icon: "fa-star",
                color: "bg-green-600",
                keywords: ["符合需求", "計畫出來的", "持續改善", "QA/QC"],
                desc: "確保產出符合標準。強調預防勝於檢查（品質是計畫出來的）。",
                metaphor: "【主廚對味道的堅持】SOP 確保每道菜味道一致。不好的菜在出廚房前就要被攔下來。"
            },
            {
                id: 6,
                area: "資源管理 (Resource)",
                category: "輔助支撐",
                icon: "fa-users",
                color: "bg-green-600",
                keywords: ["團隊建設", "實體資源", "衝突管理", "激勵"],
                desc: "管理「人」與「物」。包含團隊組建、培訓及實體材料設備的分配。",
                metaphor: "【員工與食材調度】排班表確保有人上班，庫存表確保冰箱有肉。還要負責員工訓練與士氣。"
            },
            {
                id: 7,
                area: "溝通管理 (Communication)",
                category: "輔助支撐",
                icon: "fa-comments",
                color: "bg-green-600",
                keywords: ["資訊分發", "報告", "90%時間", "適時適地"],
                desc: "確保資訊正確生成、收集與分發。PM 花費 75%-90% 時間在此。",
                metaphor: "【外場服務與傳話】服務生把客人的需求準確傳給廚房，再把廚房的進度告訴客人。"
            },
            {
                id: 8,
                area: "風險管理 (Risk)",
                category: "輔助支撐",
                icon: "fa-fire-extinguisher",
                color: "bg-green-600",
                keywords: ["不確定性", "機率與衝擊", "應變計畫", "機會與威脅"],
                desc: "辨識不確定事件。對壞的（威脅）要減輕，對好的（機會）要增加。",
                metaphor: "【滅火器與備案】準備滅火器以防萬一；如果某種食材缺貨，有預備的替代菜單。"
            },
            {
                id: 9,
                area: "採購管理 (Procurement)",
                category: "輔助支撐",
                icon: "fa-file-signature",
                color: "bg-green-600",
                keywords: ["合約", "賣方", "自製或外購", "索賠"],
                desc: "從外部獲取產品或服務。涉及合約類型的選擇（總價、工料等）。",
                metaphor: "【供應商簽約】跟菜商、肉商簽訂長期合約，確保價格穩定且供貨正常。"
            },
            {
                id: 10,
                area: "利害關係人管理 (Stakeholder)",
                category: "輔助支撐",
                icon: "fa-handshake",
                color: "bg-green-600",
                keywords: ["期望管理", "影響力", "參與度", "滿意度"],
                desc: "第10個加入的領域。辨識能影響專案或被專案影響的人，管理他們的期望。",
                metaphor: "【鄰居與奧客應對】安撫排隊的客人（管理期望），跟隔壁鄰居打好關係以免被檢舉噪音。"
            }
        ];

        function App() {
            const [view, setView] = useState('learn'); // learn or quiz
            const [selectedCategory, setSelectedCategory] = useState('All');

            return (
                <div className="min-h-screen bg-gray-50 text-gray-800">
                    {/* Header */}
                    <header className="bg-emerald-700 text-white shadow-lg sticky top-0 z-50">
                        <div className="container mx-auto px-4 py-4 flex justify-between items-center">
                            <div className="flex items-center space-x-3">
                                <i className="fas fa-project-diagram text-2xl"></i>
                                <div>
                                    <h1 className="text-xl font-bold">PMBOK 十大領域備考導師</h1>
                                    <p className="text-xs text-emerald-100 hidden sm:block">專案管理初學者專用 - 餐廳譬喻法</p>
                                </div>
                            </div>
                            <nav className="flex space-x-2">
                                <button 
                                    onClick={() => setView('learn')}
                                    className={`px-4 py-2 rounded-full transition ${view === 'learn' ? 'bg-white text-emerald-800 font-bold' : 'hover:bg-emerald-600'}`}
                                >
                                    <i className="fas fa-book-open mr-2"></i>學習模式
                                </button>
                                <button 
                                    onClick={() => setView('quiz')}
                                    className={`px-4 py-2 rounded-full transition ${view === 'quiz' ? 'bg-white text-emerald-800 font-bold' : 'hover:bg-emerald-600'}`}
                                >
                                    <i className="fas fa-question-circle mr-2"></i>模擬測驗
                                </button>
                            </nav>
                        </div>
                    </header>

                    <main className="container mx-auto px-4 py-8">
                        {view === 'learn' ? <LearningMode /> : <QuizMode />}
                    </main>
                    
                    <footer className="bg-gray-800 text-gray-400 py-6 text-center mt-8">
                        <p>Based on PMBOK Guide Concepts for Beginners</p>
                    </footer>
                </div>
            );
        }

        function LearningMode() {
            const [filter, setFilter] = useState('All');

            const filteredData = filter === 'All' ? data : data.filter(item => item.category === filter);

            return (
                <div className="fade-in">
                    <div className="mb-8 text-center">
                        <h2 className="text-2xl font-bold mb-4 text-gray-700">知識體系圖解</h2>
                        <div className="flex flex-wrap justify-center gap-2">
                            {['All', '核心大腦', '黃金鐵三角', '輔助支撐'].map(cat => (
                                <button
                                    key={cat}
                                    onClick={() => setFilter(cat)}
                                    className={`px-4 py-2 rounded-lg border transition ${
                                        filter === cat 
                                        ? 'bg-emerald-600 text-white border-emerald-600 shadow-md' 
                                        : 'bg-white text-gray-600 border-gray-300 hover:bg-gray-50'
                                    }`}
                                >
                                    {cat}
                                </button>
                            ))}
                        </div>
                        <p className="mt-4 text-sm text-gray-500">提示：將滑鼠移到卡片上（手機請點擊）查看詳細定義與「餐廳譬喻」。</p>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {filteredData.map(item => (
                            <div key={item.id} className="h-80 w-full card-flip cursor-pointer group">
                                <div className="card-inner">
                                    {/* Front */}
                                    <div className={`card-front shadow-lg text-white ${item.color}`}>
                                        <div className="text-5xl mb-4 opacity-90">
                                            <i className={`fas ${item.icon}`}></i>
                                        </div>
                                        <h3 className="text-xl font-bold mb-2">{item.area}</h3>
                                        <span className="bg-white/20 px-3 py-1 rounded-full text-sm backdrop-blur-sm">
                                            {item.category}
                                        </span>
                                        <div className="mt-6 text-sm opacity-90 text-center px-4">
                                            <p>點擊翻轉查看譬喻</p>
                                        </div>
                                    </div>
                                    
                                    {/* Back */}
                                    <div className="card-back border-2 border-emerald-100">
                                        <div className="w-full h-full p-4 flex flex-col items-center justify-start overflow-y-auto">
                                            <h4 className="font-bold text-emerald-800 text-lg mb-2 border-b w-full pb-2">PMBOK 定義</h4>
                                            <p className="text-gray-600 text-sm mb-4 leading-relaxed text-left w-full">
                                                {item.desc}
                                            </p>
                                            
                                            <h4 className="font-bold text-orange-600 text-lg mb-2 border-b w-full pb-2">
                                                <i className="fas fa-utensils mr-2"></i>餐廳譬喻
                                            </h4>
                                            <p className="text-gray-600 text-sm mb-4 leading-relaxed text-left w-full bg-orange-50 p-2 rounded">
                                                {item.metaphor}
                                            </p>

                                            <div className="mt-auto w-full">
                                                <h5 className="text-xs font-bold text-gray-400 uppercase mb-1">考試關鍵字</h5>
                                                <div className="flex flex-wrap gap-1 justify-center">
                                                    {item.keywords.map(kw => (
                                                        <span key={kw} className="text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded">
                                                            {kw}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        function QuizMode() {
            const [currentQuestion, setCurrentQuestion] = useState(null);
            const [score, setScore] = useState(0);
            const [answered, setAnswered] = useState(false);
            const [feedback, setFeedback] = useState(null);
            const [round, setRound] = useState(0);

            useEffect(() => {
                generateQuestion();
            }, [round]);

            const generateQuestion = () => {
                const randomItem = data[Math.floor(Math.random() * data.length)];
                // Randomly choose question type: 0 = Definition, 1 = Metaphor, 2 = Keyword
                const type = Math.floor(Math.random() * 3);
                
                let qText = "";
                let qTypeLabel = "";

                if (type === 0) {
                    qText = randomItem.desc;
                    qTypeLabel = "定義題";
                } else if (type === 1) {
                    qText = randomItem.metaphor;
                    qTypeLabel = "情境譬喻題";
                } else {
                    qText = `下列哪個領域包含關鍵字：「${randomItem.keywords[0]}」與「${randomItem.keywords[1]}」？`;
                    qTypeLabel = "關鍵字題";
                }

                // Generate options (1 correct + 3 wrong)
                const options = [randomItem];
                while (options.length < 4) {
                    const randomOption = data[Math.floor(Math.random() * data.length)];
                    if (!options.find(o => o.id === randomOption.id)) {
                        options.push(randomOption);
                    }
                }

                // Shuffle options
                for (let i = options.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [options[i], options[j]] = [options[j], options[i]];
                }

                setCurrentQuestion({
                    target: randomItem,
                    text: qText,
                    label: qTypeLabel,
                    options: options
                });
                setAnswered(false);
                setFeedback(null);
            };

            const handleAnswer = (option) => {
                if (answered) return;
                
                setAnswered(true);
                if (option.id === currentQuestion.target.id) {
                    setScore(s => s + 10);
                    setFeedback({ type: 'success', msg: '答對了！觀念很正確喔！' });
                } else {
                    setFeedback({ 
                        type: 'error', 
                        msg: `答錯了。正確答案是【${currentQuestion.target.area}】。因為：${currentQuestion.target.desc.substring(0, 30)}...` 
                    });
                }
            };

            const nextQuestion = () => {
                setRound(r => r + 1);
            };

            if (!currentQuestion) return <div>Loading...</div>;

            return (
                <div className="max-w-2xl mx-auto fade-in">
                    <div className="bg-white rounded-xl shadow-lg p-8">
                        <div className="flex justify-between items-center mb-6 border-b pb-4">
                            <span className="bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full text-sm font-bold">
                                {currentQuestion.label}
                            </span>
                            <div className="text-xl font-bold text-gray-700">
                                得分: <span className="text-emerald-600">{score}</span>
                            </div>
                        </div>

                        <div className="mb-8">
                            <h3 className="text-xl text-gray-800 font-medium leading-relaxed">
                                {currentQuestion.text}
                            </h3>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {currentQuestion.options.map((opt) => (
                                <button
                                    key={opt.id}
                                    onClick={() => handleAnswer(opt)}
                                    disabled={answered}
                                    className={`
                                        p-4 rounded-lg border-2 text-left transition relative overflow-hidden
                                        ${answered && opt.id === currentQuestion.target.id ? 'border-green-500 bg-green-50' : ''}
                                        ${answered && opt.id !== currentQuestion.target.id && feedback.type === 'error' ? 'opacity-50' : ''}
                                        ${!answered ? 'hover:border-emerald-500 hover:shadow-md border-gray-200' : ''}
                                    `}
                                >
                                    <div className="flex items-center">
                                        <div className={`w-8 h-8 rounded-full flex items-center justify-center mr-3 text-white text-xs ${opt.color}`}>
                                            <i className={`fas ${opt.icon}`}></i>
                                        </div>
                                        <span className="font-semibold text-gray-700">{opt.area}</span>
                                    </div>
                                    {answered && opt.id === currentQuestion.target.id && (
                                        <i className="fas fa-check-circle text-green-500 absolute top-2 right-2 text-xl"></i>
                                    )}
                                </button>
                            ))}
                        </div>

                        {answered && (
                            <div className={`mt-6 p-4 rounded-lg ${feedback.type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'} flex justify-between items-center`}>
                                <div>
                                    <i className={`fas ${feedback.type === 'success' ? 'fa-smile-beam' : 'fa-exclamation-circle'} mr-2`}></i>
                                    {feedback.msg}
                                </div>
                                <button 
                                    onClick={nextQuestion}
                                    className="bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition"
                                >
                                    下一題 <i className="fas fa-arrow-right ml-1"></i>
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>