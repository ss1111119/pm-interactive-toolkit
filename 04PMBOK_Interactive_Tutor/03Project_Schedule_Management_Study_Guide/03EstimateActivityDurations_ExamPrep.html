<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼°è¨ˆæ´»å‹•å·¥æœŸ - äº’å‹•å­¸ç¿’å·¥å…·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background-color: #f3f4f6;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            transition: all 0.2s;
        }
        .animate-bounce-in {
            animation: bounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icons
        const Icons = {
            Clock: () => <i data-lucide="clock" className="w-6 h-6"></i>,
            Calculator: () => <i data-lucide="calculator" className="w-6 h-6"></i>,
            BookOpen: () => <i data-lucide="book-open" className="w-6 h-6"></i>,
            Target: () => <i data-lucide="target" className="w-6 h-6"></i>,
            CheckCircle: () => <i data-lucide="check-circle" className="w-6 h-6 text-green-500"></i>,
            XCircle: () => <i data-lucide="x-circle" className="w-6 h-6 text-red-500"></i>,
            AlertTriangle: () => <i data-lucide="alert-triangle" className="w-6 h-6"></i>,
            TrendingUp: () => <i data-lucide="trending-up" className="w-6 h-6"></i>,
            Users: () => <i data-lucide="users" className="w-6 h-6"></i>,
            FileText: () => <i data-lucide="file-text" className="w-6 h-6"></i>,
            Map: () => <i data-lucide="map" className="w-6 h-6"></i>
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('concepts');

            useEffect(() => {
                lucide.createIcons();
            }, [activeTab]);

            return (
                <div className="min-h-screen pb-12">
                    {/* Header */}
                    <header className="bg-blue-600 text-white p-6 shadow-lg">
                        <div className="max-w-4xl mx-auto">
                            <h1 className="text-3xl font-bold flex items-center gap-3">
                                <Icons.Clock />
                                å°ˆæ¡ˆæ™‚ç¨‹ç®¡ç†ï¼šä¼°è¨ˆæ´»å‹•å·¥æœŸ
                            </h1>
                            <p className="mt-2 text-blue-100">PMP è€ƒè©¦æº–å‚™äº’å‹•æŒ‡å—</p>
                        </div>
                    </header>

                    {/* Navigation */}
                    <nav className="max-w-4xl mx-auto mt-6 px-4">
                        <div className="bg-white rounded-lg shadow p-1 flex overflow-x-auto">
                            {[
                                { id: 'concepts', label: 'æ ¸å¿ƒè§€å¿µ', icon: <Icons.BookOpen /> },
                                { id: 'methods', label: 'ä¼°ç®—æŠ€è¡“æ¯”è¼ƒ', icon: <Icons.TrendingUp /> },
                                { id: 'calculator', label: 'PERT è¨ˆç®—æ©Ÿ', icon: <Icons.Calculator /> },
                                { id: 'quiz', label: 'æ¨¡æ“¬æ¸¬é©—', icon: <Icons.Target /> }
                            ].map(tab => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-md transition-colors whitespace-nowrap ${
                                        activeTab === tab.id 
                                        ? 'bg-blue-100 text-blue-700 font-bold' 
                                        : 'text-gray-600 hover:bg-gray-50'
                                    }`}
                                >
                                    {tab.icon}
                                    {tab.label}
                                </button>
                            ))}
                        </div>
                    </nav>

                    {/* Content Area */}
                    <main className="max-w-4xl mx-auto mt-6 px-4">
                        {activeTab === 'concepts' && <ConceptsView />}
                        {activeTab === 'methods' && <MethodsView />}
                        {activeTab === 'calculator' && <PertCalculatorView />}
                        {activeTab === 'quiz' && <QuizView />}
                    </main>
                </div>
            );
        };

        // 1. Concepts View (Updated with Inputs and Context)
        const ConceptsView = () => (
            <div className="space-y-6">
                {/* 1. Definition */}
                <div className="bg-white p-6 rounded-xl shadow card-hover border-l-4 border-blue-500">
                    <h2 className="text-xl font-bold mb-4 text-gray-800 flex items-center gap-2">
                        <Icons.FileText /> å®šç¾©èˆ‡å€åˆ¥
                    </h2>
                    <div className="grid md:grid-cols-2 gap-6">
                        <div className="bg-blue-50 p-4 rounded-lg">
                            <h3 className="font-bold text-blue-800 mb-2">å·¥æœŸ (Duration)</h3>
                            <p className="text-gray-700">å®Œæˆå·¥ä½œæ‰€éœ€çš„ã€Œæ™‚é–“æ®µæ•¸ã€ã€‚</p>
                            <p className="text-sm text-gray-500 mt-2">ä¾‹ï¼šé€™é …å·¥ä½œéœ€è¦ 3 å€‹å·¥ä½œå¤©æ‰èƒ½å®Œæˆã€‚</p>
                        </div>
                        <div className="bg-purple-50 p-4 rounded-lg">
                            <h3 className="font-bold text-purple-800 mb-2">å·¥ä½œé‡ (Effort)</h3>
                            <p className="text-gray-700">å®Œæˆå·¥ä½œæ‰€éœ€çš„ã€Œäººå¤©ã€æˆ–ã€Œäººæ™‚ã€ã€‚</p>
                            <p className="text-sm text-gray-500 mt-2">ä¾‹ï¼šé€™é …å·¥ä½œç¸½å…±éœ€è¦ 24 å€‹äººæ™‚ã€‚</p>
                        </div>
                    </div>
                </div>

                {/* 2. Key Inputs & Context (Newly Added) */}
                <div className="bg-white p-6 rounded-xl shadow card-hover border-l-4 border-teal-500">
                    <h2 className="text-xl font-bold mb-4 text-gray-800 flex items-center gap-2">
                        <Icons.Users /> é—œéµè¼¸å…¥èˆ‡ç’°å¢ƒåˆ¶ç´„
                    </h2>
                    <div className="grid md:grid-cols-2 gap-6">
                         <div>
                            <h3 className="font-bold text-teal-700 mb-2">è³‡æºä¾è³´æ€§</h3>
                            <ul className="list-disc pl-5 text-gray-700 space-y-1">
                                <li>å·¥æœŸå—<strong>è³‡æºæ•¸é‡</strong>å½±éŸ¿ï¼ˆ2äººåš vs 1äººåšï¼‰ã€‚</li>
                                <li>å·¥æœŸå—<strong>è³‡æºèƒ½åŠ›</strong>å½±éŸ¿ï¼ˆè³‡æ·±å“¡å·¥ vs æ–°æ‰‹ï¼‰ã€‚</li>
                                <li className="text-sm text-gray-500">å¿…é ˆåƒè€ƒã€Œè³‡æºéœ€æ±‚ã€æ–‡ä»¶ã€‚</li>
                            </ul>
                        </div>
                        <div>
                            <h3 className="font-bold text-teal-700 mb-2">å‡è¨­èˆ‡é¢¨éšª</h3>
                            <ul className="list-disc pl-5 text-gray-700 space-y-1">
                                <li><strong>é¢¨éšªç™»éŒ„ç°¿</strong>ï¼šåˆ†æå¯èƒ½å»¶èª¤å·¥æœŸçš„é¢¨éšªã€‚</li>
                                <li><strong>å‡è¨­æ—¥èªŒ</strong>ï¼šè¨˜éŒ„ä¼°ç®—æ™‚çš„å‡è¨­æ¢ä»¶ã€‚</li>
                            </ul>
                        </div>
                    </div>
                    <div className="mt-4 p-3 bg-gray-50 rounded-lg text-sm text-gray-600 border-t border-gray-200">
                        <strong>ğŸ“Œ æµç¨‹åœ°ä½ï¼š</strong> æ­¤æµç¨‹æ˜¯ã€Œç™¼å±•æ™‚ç¨‹ã€çš„åŸºç¤ã€‚å¦‚æœä¼°è¨ˆä¸æº–ï¼Œå¾ŒçºŒå»ºç«‹çš„<strong>é—œéµè·¯å¾‘ (CPM)</strong> æˆ–<strong>ç”˜ç‰¹åœ–</strong>éƒ½å°‡å¤±å»ç®¡ç†æ•ˆåŠ›ã€‚
                    </div>
                </div>

                {/* 3. Reserve Analysis */}
                <div className="bg-white p-6 rounded-xl shadow card-hover border-l-4 border-orange-500">
                    <h2 className="text-xl font-bold mb-4 text-gray-800 flex items-center gap-2">
                        <Icons.AlertTriangle /> å„²å‚™åˆ†æ (Reserve Analysis)
                    </h2>
                    <p className="mb-4 text-gray-600">ä¼°è¨ˆå·¥æœŸæ™‚ï¼Œå¿…é ˆè€ƒæ…®ä¸ç¢ºå®šæ€§ï¼Œä¸¦é ç•™ç·©è¡æ™‚é–“ã€‚</p>
                    <div className="space-y-4">
                        <div className="flex items-start gap-4">
                            <div className="bg-orange-100 p-2 rounded-full mt-1">
                                <Icons.AlertTriangle />
                            </div>
                            <div>
                                <h3 className="font-bold text-gray-800">æ‡‰è®Šå„²å‚™ (Contingency Reserves)</h3>
                                <p className="text-gray-600">é‡å°<span className="font-bold text-orange-600">ã€Œå·²çŸ¥çš„ä¸ç¢ºå®šæ€§ã€</span>ï¼ˆå¦‚å·²è­˜åˆ¥çš„é¢¨éšªï¼‰ã€‚</p>
                                <span className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">åŒ…å«åœ¨æ™‚ç¨‹åŸºæº–å…§</span>
                            </div>
                        </div>
                        <div className="flex items-start gap-4">
                            <div className="bg-red-100 p-2 rounded-full mt-1">
                                <Icons.AlertTriangle />
                            </div>
                            <div>
                                <h3 className="font-bold text-gray-800">ç®¡ç†å„²å‚™ (Management Reserves)</h3>
                                <p className="text-gray-600">é‡å°<span className="font-bold text-red-600">ã€ŒæœªçŸ¥çš„ä¸ç¢ºå®šæ€§ã€</span>ï¼ˆå¦‚æœªé è¦‹çš„è®Šå‹•ï¼‰ã€‚</p>
                                <span className="text-xs bg-gray-200 text-gray-800 px-2 py-1 rounded-full">ä¸å«åœ¨åŸºæº–å…§ï¼Œä½†åœ¨å°ˆæ¡ˆç¸½éœ€æ±‚ä¸­</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        );

        // 2. Methods View
        const MethodsView = () => {
            const methods = [
                {
                    title: "é¡æ¯”ä¼°è¨ˆ (Analogous)",
                    desc: "åƒè€ƒéå»é¡ä¼¼å°ˆæ¡ˆçš„å¯¦éš›å·¥æœŸã€‚",
                    pros: "é€Ÿåº¦å¿«ã€æˆæœ¬ä½ã€‚",
                    cons: "æº–ç¢ºæ€§è¼ƒä½ã€‚",
                    context: "ç”±ä¸Šè€Œä¸‹ä¼°è¨ˆæ³•ï¼Œå¸¸åœ¨åˆæœŸè³‡è¨Šä¸è¶³æ™‚ä½¿ç”¨ã€‚"
                },
                {
                    title: "åƒæ•¸ä¼°è¨ˆ (Parametric)",
                    desc: "åˆ©ç”¨æ­·å²æ•¸æ“šèˆ‡è®Šæ•¸çš„çµ±è¨ˆé—œä¿‚ï¼ˆå¦‚ï¼šåªæ•¸ Ã— æ¯åªæ™‚é–“ï¼‰ã€‚",
                    pros: "æ¯”é¡æ¯”æº–ç¢ºã€‚",
                    cons: "ä¾è³´æ¨¡å‹æˆç†Ÿåº¦èˆ‡æ•¸æ“šå“è³ªã€‚",
                    context: "æ•¸å­¸æ¨¡å‹è¨ˆç®—ã€‚"
                },
                {
                    title: "ä¸‰é»ä¼°è¨ˆ (Three-point)",
                    desc: "è€ƒé‡ä¸ç¢ºå®šæ€§ (PERT)ã€‚",
                    pros: "èƒ½åæ˜ é¢¨éšªï¼Œå¯è¨ˆç®—æ¨™æº–å·®ã€‚",
                    cons: "è¨ˆç®—è¼ƒè¤‡é›œã€‚",
                    context: "æ¨‚è§€ + (4 Ã— å¯èƒ½) + æ‚²è§€ Ã· 6"
                },
                {
                    title: "ç”±ä¸‹è€Œä¸Šä¼°è¨ˆ (Bottom-up)",
                    desc: "å°‡æ´»å‹•ç´°åˆ†å¾Œé€ä¸€ä¼°è¨ˆå†å½™ç¸½ã€‚",
                    pros: "æœ€ç‚ºç²¾ç¢ºã€‚",
                    cons: "æœ€è€—æ™‚ã€è²»äº‹ã€‚",
                    context: "é©åˆè©³ç´°è¦åŠƒéšæ®µã€‚"
                }
            ];

            return (
                <div className="grid md:grid-cols-2 gap-4">
                    {methods.map((m, idx) => (
                        <div key={idx} className="bg-white p-5 rounded-xl shadow-md border border-gray-100 hover:border-blue-300 transition-colors">
                            <h3 className="text-lg font-bold text-blue-700 mb-2">{m.title}</h3>
                            <p className="text-gray-700 font-medium mb-2">{m.desc}</p>
                            <div className="text-sm text-gray-600 space-y-1">
                                <p>âœ… <span className="font-semibold">å„ªé»ï¼š</span>{m.pros}</p>
                                <p>âŒ <span className="font-semibold">ç¼ºé»ï¼š</span>{m.cons}</p>
                                <p className="mt-2 pt-2 border-t border-gray-100 text-gray-500 italic">{m.context}</p>
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        // 3. PERT Calculator View
        const PertCalculatorView = () => {
            const [values, setValues] = useState({ o: 0, m: 0, p: 0 });
            const [result, setResult] = useState(null);

            const calculate = () => {
                const o = parseFloat(values.o);
                const m = parseFloat(values.m);
                const p = parseFloat(values.p);

                if (isNaN(o) || isNaN(m) || isNaN(p)) return;

                const te = (o + 4 * m + p) / 6; // Expected Duration
                const sd = (p - o) / 6; // Standard Deviation

                setResult({ te: te.toFixed(2), sd: sd.toFixed(2) });
            };

            return (
                <div className="bg-white p-8 rounded-xl shadow-lg max-w-2xl mx-auto">
                    <h2 className="text-2xl font-bold mb-6 text-center text-gray-800">PERT ä¸‰é»ä¼°è¨ˆè¨ˆç®—æ©Ÿ</h2>
                    
                    <div className="grid grid-cols-3 gap-4 mb-6">
                        <div className="space-y-2">
                            <label className="block text-sm font-medium text-green-600">æ¨‚è§€æ™‚é–“ (tO)</label>
                            <input 
                                type="number" 
                                value={values.o}
                                onChange={(e) => setValues({...values, o: e.target.value})}
                                className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-300 outline-none"
                                placeholder="æœ€å¿«"
                            />
                        </div>
                        <div className="space-y-2">
                            <label className="block text-sm font-medium text-blue-600">æœ€å¯èƒ½æ™‚é–“ (tM)</label>
                            <input 
                                type="number" 
                                value={values.m}
                                onChange={(e) => setValues({...values, m: e.target.value})}
                                className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-300 outline-none"
                                placeholder="æ­£å¸¸"
                            />
                        </div>
                        <div className="space-y-2">
                            <label className="block text-sm font-medium text-red-600">æ‚²è§€æ™‚é–“ (tP)</label>
                            <input 
                                type="number" 
                                value={values.p}
                                onChange={(e) => setValues({...values, p: e.target.value})}
                                className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-red-300 outline-none"
                                placeholder="æœ€æ…¢"
                            />
                        </div>
                    </div>

                    <button 
                        onClick={calculate}
                        className="w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors mb-6 shadow-md"
                    >
                        è¨ˆç®—æœŸæœ›å·¥æœŸ
                    </button>

                    {result && (
                        <div className="bg-gray-50 p-6 rounded-lg border border-gray-200">
                            <div className="grid grid-cols-2 gap-8 text-center">
                                <div>
                                    <p className="text-gray-500 mb-1">æœŸæœ›å·¥æœŸ (tE)</p>
                                    <p className="text-3xl font-bold text-blue-600">{result.te}</p>
                                    <p className="text-xs text-gray-400 mt-1">(tO + 4tM + tP) / 6</p>
                                </div>
                                <div>
                                    <p className="text-gray-500 mb-1">æ¨™æº–å·® (Ïƒ)</p>
                                    <p className="text-3xl font-bold text-purple-600">{result.sd}</p>
                                    <p className="text-xs text-gray-400 mt-1">(tP - tO) / 6</p>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="mt-6 bg-blue-50 p-4 rounded text-sm text-blue-800">
                        <strong>ğŸ’¡ å­¸ç¿’æç¤ºï¼š</strong> 
                        è©¦è‘—è¼¸å…¥ æ¨‚è§€=2, æœ€å¯èƒ½=5, æ‚²è§€=14ã€‚
                        <br/>
                        ä½ æœƒç™¼ç¾é›–ç„¶å¹³å‡æ˜¯ 7ï¼Œä½†åŠ æ¬Šå¾Œçš„ PERT å¹³å‡å€¼æ˜¯ 6 (å› ç‚º "æœ€å¯èƒ½" çš„æ¬Šé‡æœ‰ 4 å€)ã€‚
                    </div>
                </div>
            );
        };

        // 4. Quiz View
        const QuizView = () => {
            const questions = [
                {
                    q: "å“ªä¸€ç¨®ä¼°è¨ˆæŠ€è¡“é›–ç„¶é€Ÿåº¦æœ€å¿«ï¼Œä½†æº–ç¢ºæ€§è¼ƒä½ï¼Œé€šå¸¸åœ¨å°ˆæ¡ˆåˆæœŸè³‡è¨Šä¸è¶³æ™‚ä½¿ç”¨ï¼Ÿ",
                    options: ["åƒæ•¸ä¼°è¨ˆ", "ä¸‰é»ä¼°è¨ˆ", "é¡æ¯”ä¼°è¨ˆ", "ç”±ä¸‹è€Œä¸Šä¼°è¨ˆ"],
                    ans: 2,
                    expl: "é¡æ¯”ä¼°è¨ˆ (Analogous Estimating) æ˜¯åƒè€ƒéå»é¡ä¼¼å°ˆæ¡ˆï¼Œå±¬æ–¼ç²—ç•¥ä¼°ç®—ã€‚"
                },
                {
                    q: "æ ¹æ“š PERT æŠ€è¡“ï¼Œå¦‚æœæ¨‚è§€æ™‚é–“æ˜¯ 2 å¤©ï¼Œæœ€å¯èƒ½æ™‚é–“æ˜¯ 3 å¤©ï¼Œæ‚²è§€æ™‚é–“æ˜¯ 10 å¤©ï¼Œè«‹å•æœŸæœ›å·¥æœŸæ˜¯å¤šå°‘ï¼Ÿ",
                    options: ["3 å¤©", "4 å¤©", "5 å¤©", "6 å¤©"],
                    ans: 1,
                    expl: "è¨ˆç®—å…¬å¼ï¼š(2 + 4*3 + 10) / 6 = 24 / 6 = 4 å¤©ã€‚"
                },
                {
                    q: "é‡å°ã€ŒæœªçŸ¥çš„ä¸ç¢ºå®šæ€§ã€ï¼ˆå¦‚æœªé è¦‹çš„è®Šå‹•ï¼‰æ‰€é ç•™çš„æ™‚é–“ï¼Œä¸åŒ…å«åœ¨æ™‚ç¨‹åŸºæº–å…§ï¼Œç¨±ç‚ºï¼Ÿ",
                    options: ["æ‡‰è®Šå„²å‚™", "ç®¡ç†å„²å‚™", "æˆæœ¬åŸºæº–", "é¢¨éšªç™»è¨˜ç°¿"],
                    ans: 1,
                    expl: "ç®¡ç†å„²å‚™ (Management Reserves) æ˜¯ç‚ºäº†æ‡‰å°æœªçŸ¥é¢¨éšªï¼Œä¸åŒ…å«åœ¨åŸºæº–å…§ã€‚"
                },
                {
                    q: "å“ªä¸€ç¨®ä¼°è¨ˆæ³•æœ€ç‚ºç²¾ç¢ºï¼Œä½†ä¹Ÿæœ€è€—æ™‚è²»äº‹ï¼Ÿ",
                    options: ["é¡æ¯”ä¼°è¨ˆ", "ç”±ä¸‹è€Œä¸Šä¼°è¨ˆ", "åƒæ•¸ä¼°è¨ˆ", "ä¸‰é»ä¼°è¨ˆ"],
                    ans: 1,
                    expl: "ç”±ä¸‹è€Œä¸Šä¼°è¨ˆ (Bottom-up) å°‡æ´»å‹•ç´°åˆ†å¾Œé€ä¸€ä¼°è¨ˆï¼Œæº–ç¢ºåº¦æœ€é«˜ã€‚"
                },
                {
                    q: "ä¼°ç®—å·¥æœŸæ™‚ï¼Œè‹¥æœªè€ƒæ…®ã€Œè³‡æºèƒ½åŠ›ã€çš„å·®ç•°ï¼Œæœ€å¯èƒ½å°è‡´ä»€éº¼å¾Œæœï¼Ÿ",
                    options: ["å¢åŠ ç®¡ç†å„²å‚™", "ä¼°ç®—çµæœä¸æº–ç¢º", "æ”¹è®Šé—œéµè·¯å¾‘", "ç„¡æ³•ä½¿ç”¨é¡æ¯”ä¼°è¨ˆ"],
                    ans: 1,
                    expl: "å·¥æœŸå—è³‡æºèƒ½åŠ›ç›´æ¥å½±éŸ¿ï¼ˆå¦‚æ–°æ‰‹ vs è³‡æ·±ï¼‰ï¼Œè‹¥æœªè€ƒæ…®æœƒå°è‡´ä¼°ç®—å¤±æº–ã€‚"
                }
            ];

            const [userAnswers, setUserAnswers] = useState({});
            const [showResults, setShowResults] = useState(false);

            const handleSelect = (qIdx, optIdx) => {
                if (showResults) return;
                setUserAnswers({...userAnswers, [qIdx]: optIdx});
            };

            const score = Object.keys(userAnswers).reduce((acc, key) => {
                return acc + (userAnswers[key] === questions[key].ans ? 1 : 0);
            }, 0);

            return (
                <div className="max-w-2xl mx-auto space-y-6">
                    {questions.map((q, qIdx) => (
                        <div key={qIdx} className="bg-white p-6 rounded-xl shadow border border-gray-100">
                            <h3 className="font-bold text-lg mb-4 text-gray-800">
                                <span className="text-blue-500 mr-2">Q{qIdx + 1}.</span>
                                {q.q}
                            </h3>
                            <div className="space-y-2">
                                {q.options.map((opt, optIdx) => {
                                    let btnClass = "w-full text-left p-3 rounded-lg border transition-all ";
                                    
                                    if (showResults) {
                                        if (optIdx === q.ans) btnClass += "bg-green-100 border-green-500 text-green-800 font-bold";
                                        else if (userAnswers[qIdx] === optIdx) btnClass += "bg-red-100 border-red-500 text-red-800";
                                        else btnClass += "bg-gray-50 border-gray-200 opacity-60";
                                    } else {
                                        if (userAnswers[qIdx] === optIdx) btnClass += "bg-blue-100 border-blue-500 text-blue-800";
                                        else btnClass += "hover:bg-gray-50 border-gray-200";
                                    }

                                    return (
                                        <button 
                                            key={optIdx}
                                            onClick={() => handleSelect(qIdx, optIdx)}
                                            className={btnClass}
                                        >
                                            <div className="flex justify-between items-center">
                                                <span>{opt}</span>
                                                {showResults && optIdx === q.ans && <Icons.CheckCircle />}
                                                {showResults && userAnswers[qIdx] === optIdx && optIdx !== q.ans && <Icons.XCircle />}
                                            </div>
                                        </button>
                                    );
                                })}
                            </div>
                            {showResults && (
                                <div className="mt-4 p-3 bg-yellow-50 text-yellow-800 text-sm rounded border border-yellow-200">
                                    <strong>è§£æï¼š</strong> {q.expl}
                                </div>
                            )}
                        </div>
                    ))}

                    <div className="text-center py-6">
                        {!showResults ? (
                            <button 
                                onClick={() => setShowResults(true)}
                                disabled={Object.keys(userAnswers).length < questions.length}
                                className={`px-8 py-3 rounded-full font-bold shadow-lg transition-transform ${
                                    Object.keys(userAnswers).length < questions.length 
                                    ? 'bg-gray-300 cursor-not-allowed text-gray-500' 
                                    : 'bg-blue-600 text-white hover:scale-105'
                                }`}
                            >
                                æäº¤ç­”æ¡ˆ
                            </button>
                        ) : (
                            <div className="text-center animate-bounce-in">
                                <p className="text-2xl font-bold mb-2">
                                    å¾—åˆ†ï¼š<span className={score === questions.length ? "text-green-600" : "text-blue-600"}>{score}</span> / {questions.length}
                                </p>
                                <button 
                                    onClick={() => {
                                        setShowResults(false);
                                        setUserAnswers({});
                                        window.scrollTo(0,0);
                                    }}
                                    className="text-blue-600 hover:underline mt-2"
                                >
                                    é‡æ–°æ¸¬é©—
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>