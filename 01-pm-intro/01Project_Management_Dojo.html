<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PM æ­¦é“é¤¨ï¼šå°ˆæ¡ˆç®¡ç†ä¿®ç…‰ä¹‹è·¯</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: #e2e8f0; /* Slate 200 */
        }
        .card-glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .active-tab {
            border-bottom: 2px solid #f59e0b; /* Amber 500 */
            color: #f59e0b;
        }
        .slider-thumb::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #f59e0b;
            cursor: pointer;
            border-radius: 50%;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col overflow-x-hidden">

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-slate-900/90 border-b border-slate-700 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-2">
                    <span class="text-2xl">ğŸ¥‹</span>
                    <span class="font-bold text-xl tracking-wider text-white">PM æ­¦é“é¤¨</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4" id="nav-links">
                        <button onclick="switchView('intro')" class="nav-btn hover:text-amber-400 px-3 py-2 rounded-md text-sm font-medium transition active-tab" data-target="intro">é“å ´å…¥é–€</button>
                        <button onclick="switchView('matrix')" class="nav-btn hover:text-amber-400 px-3 py-2 rounded-md text-sm font-medium transition" data-target="matrix">å¤–å®¶æ‹³è­œ (æµç¨‹)</button>
                        <button onclick="switchView('tools')" class="nav-btn hover:text-amber-400 px-3 py-2 rounded-md text-sm font-medium transition" data-target="tools">å…µå™¨ä¿®ç…‰ (å·¥å…·)</button>
                        <button onclick="switchView('quiz')" class="nav-btn hover:text-amber-400 px-3 py-2 rounded-md text-sm font-medium transition" data-target="quiz">å¸«çˆ¶è©¦ç…‰ (å¯¦æˆ°)</button>
                    </div>
                </div>
                <!-- Mobile menu button (Simplified) -->
                <div class="-mr-2 flex md:hidden">
                    <button class="bg-slate-800 p-2 rounded-md text-gray-400 hover:text-white" onclick="document.getElementById('mobile-menu').classList.toggle('hidden')">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div class="hidden md:hidden bg-slate-800" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <button onclick="switchView('intro')" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-slate-700 w-full text-left">é“å ´å…¥é–€</button>
                <button onclick="switchView('matrix')" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-slate-700 w-full text-left">å¤–å®¶æ‹³è­œ</button>
                <button onclick="switchView('tools')" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-slate-700 w-full text-left">å…µå™¨ä¿®ç…‰</button>
                <button onclick="switchView('quiz')" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-slate-700 w-full text-left">å¸«çˆ¶è©¦ç…‰</button>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- VIEW: INTRO (é“å ´å…¥é–€) -->
        <div id="view-intro" class="fade-in">
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-amber-500 mb-4">æ­¡è¿ä¾†åˆ°å°ˆæ¡ˆç®¡ç†æœ€é«˜æ®¿å ‚</h1>
                <p class="text-xl text-slate-400 max-w-3xl mx-auto">ã€ŠPMBOK æŒ‡å—ã€‹æ˜¯å°ˆæ¡ˆç®¡ç†çš„ã€Œä¸–ç•Œèªè¨€ã€ï¼Œå¦‚åŒç¿’æ­¦ä¹‹äººçš„åŸºæœ¬åŠŸã€‚</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                <div class="card-glass p-8 rounded-2xl shadow-lg border-l-4 border-blue-500 hover:transform hover:scale-105 transition duration-300">
                    <h2 class="text-2xl font-bold mb-4 flex items-center"><span class="text-3xl mr-2">ğŸ“˜</span> å¤–å®¶æ‹³æ³• (ç¬¬ 6 ç‰ˆ)</h2>
                    <p class="text-slate-300 mb-4">é€™æ˜¯å­¸ç¿’çš„**ã€Œéª¨å¹¹èˆ‡åœ°åŸºã€**ã€‚å°±åƒå°‘æ—é•·æ‹³çš„å¥—è·¯ï¼Œä¸€æ‹›ä¸€å¼çš†æœ‰å®šè¦ã€‚</p>
                    <ul class="list-disc list-inside text-slate-400 space-y-2">
                        <li><strong>5 å¤§æµç¨‹ç¾¤çµ„</strong>ï¼šå•Ÿå‹•ã€è¦åŠƒã€åŸ·è¡Œã€ç›£æ§ã€çµæŸã€‚</li>
                        <li><strong>10 å¤§çŸ¥è­˜é ˜åŸŸ</strong>ï¼šæ•´åˆã€ç¯„ç–‡ã€æ™‚ç¨‹ã€æˆæœ¬ç­‰ã€‚</li>
                        <li><strong>ITTO</strong>ï¼šè¼¸å…¥ã€å·¥å…·ã€è¼¸å‡ºçš„ç²¾ç¢ºæ“ä½œã€‚</li>
                    </ul>
                </div>
                <div class="card-glass p-8 rounded-2xl shadow-lg border-l-4 border-purple-500 hover:transform hover:scale-105 transition duration-300">
                    <h2 class="text-2xl font-bold mb-4 flex items-center"><span class="text-3xl mr-2">ğŸ§˜</span> å…§å®¶å¿ƒæ³• (ç¬¬ 7 ç‰ˆ)</h2>
                    <p class="text-slate-300 mb-4">é€™æ˜¯é€²éšçš„**ã€Œæ€ç¶­å…¸ç¯„è½‰ç§»ã€**ã€‚ä¸æ‹˜æ³¥æ–¼æ‹›å¼ï¼Œå¼·èª¿åƒ¹å€¼äº¤ä»˜ã€‚</p>
                    <ul class="list-disc list-inside text-slate-400 space-y-2">
                        <li><strong>12 é …åŸå‰‡</strong>ï¼šå¦‚ç®¡å®¶ç²¾ç¥ã€æ“æŠ±è¤‡é›œæ€§ã€‚</li>
                        <li><strong>8 é …ç¸¾æ•ˆé ˜åŸŸ</strong>ï¼šé—œæ³¨æœ€çµ‚æˆæœè€Œéåƒ…åƒ…æ˜¯ç”¢å‡ºã€‚</li>
                        <li><strong>è£é© (Tailoring)</strong>ï¼šå› åœ°åˆ¶å®œï¼Œç„¡æ‹›å‹æœ‰æ‹›ã€‚</li>
                    </ul>
                </div>
            </div>

            <div class="bg-indigo-900/30 p-6 rounded-xl border border-indigo-500/30 text-center">
                <p class="text-lg italic text-indigo-200">ã€Œå¿…é ˆå…ˆç·´å¥½å¥—è·¯ï¼ˆæµç¨‹èˆ‡å·¥å…·ï¼‰ï¼Œæ‰æœ‰èƒ½åŠ›å»é ˜æ‚Ÿä¸¦éˆæ´»é‹ç”¨å¿ƒæ³•ï¼ˆåŸå‰‡ï¼‰ã€‚ã€</p>
                <button onclick="switchView('matrix')" class="mt-6 bg-amber-500 hover:bg-amber-600 text-slate-900 font-bold py-3 px-8 rounded-full transition shadow-[0_0_15px_rgba(245,158,11,0.5)]">
                    é–‹å§‹ä¿®ç…‰æ‹³è­œ
                </button>
            </div>
        </div>

        <!-- VIEW: MATRIX (å¤–å®¶æ‹³è­œ) -->
        <div id="view-matrix" class="hidden fade-in">
            <div class="mb-8 text-center">
                <h2 class="text-3xl font-bold text-white mb-2">äº”å¤§æµç¨‹ä¿®ç…‰çŸ©é™£</h2>
                <p class="text-slate-400">é»æ“Šä¸‹æ–¹çš„æµç¨‹ç¾¤çµ„ï¼ŒæŸ¥çœ‹è©²éšæ®µå°æ‡‰çš„é—œéµã€Œæ‹›å¼ã€ï¼ˆçŸ¥è­˜é ˜åŸŸèˆ‡éç¨‹ï¼‰ã€‚</p>
            </div>

            <!-- Process Group Tabs -->
            <div class="flex flex-wrap justify-center gap-2 mb-8" id="process-buttons">
                <!-- Buttons injected by JS -->
            </div>

            <!-- Dynamic Content Area -->
            <div class="card-glass rounded-xl p-6 min-h-[400px]">
                <div id="matrix-content" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Cards injected by JS -->
                </div>
            </div>
        </div>

        <!-- VIEW: TOOLS (å…µå™¨ä¿®ç…‰) -->
        <div id="view-tools" class="hidden fade-in">
            <div class="mb-8 text-center">
                <h2 class="text-3xl font-bold text-white mb-2">å¯¦ç²å€¼ç®¡ç† (EVM) æ¨¡æ“¬å™¨</h2>
                <p class="text-slate-400">å°ˆæ¡ˆç¶“ç†æœ€é‡è¦çš„å…µå™¨ä¹‹ä¸€ã€‚æ‹–å‹•æ»‘æ¡¿æ¨¡æ“¬å°ˆæ¡ˆç¾æ³ï¼Œåˆ¤æ–·æ˜¯å¦è¶…æ”¯æˆ–è½å¾Œã€‚</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Controls -->
                <div class="card-glass p-6 rounded-xl col-span-1">
                    <h3 class="text-xl font-bold text-amber-500 mb-6 border-b border-slate-700 pb-2">åƒæ•¸è¨­å®š</h3>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-slate-300 mb-2">è¨ˆç•«åƒ¹å€¼ (PV) - é è¨ˆè¦å®Œæˆçš„å·¥ä½œ</label>
                        <input type="range" min="0" max="20000" step="500" value="10000" class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer slider-thumb" id="pv-slider">
                        <div class="flex justify-between text-xs text-slate-500 mt-1">
                            <span>$0</span>
                            <span id="pv-value" class="text-white font-bold">$10,000</span>
                            <span>$20k</span>
                        </div>
                    </div>

                    <div class="mb-6">
                        <label class="block text-sm font-medium text-slate-300 mb-2">å¯¦ç²å€¼ (EV) - å¯¦éš›å®Œæˆçš„å·¥ä½œåƒ¹å€¼</label>
                        <input type="range" min="0" max="20000" step="500" value="9000" class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer slider-thumb" id="ev-slider">
                        <div class="flex justify-between text-xs text-slate-500 mt-1">
                            <span>$0</span>
                            <span id="ev-value" class="text-white font-bold">$9,000</span>
                            <span>$20k</span>
                        </div>
                    </div>

                    <div class="mb-6">
                        <label class="block text-sm font-medium text-slate-300 mb-2">å¯¦éš›æˆæœ¬ (AC) - å¯¦éš›èŠ±æ‰çš„éŒ¢</label>
                        <input type="range" min="0" max="20000" step="500" value="11000" class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer slider-thumb" id="ac-slider">
                        <div class="flex justify-between text-xs text-slate-500 mt-1">
                            <span>$0</span>
                            <span id="ac-value" class="text-white font-bold">$11,000</span>
                            <span>$20k</span>
                        </div>
                    </div>
                </div>

                <!-- Visualization -->
                <div class="card-glass p-6 rounded-xl col-span-1 lg:col-span-2 flex flex-col">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-slate-800 p-3 rounded-lg text-center">
                            <div class="text-xs text-slate-400">æ™‚ç¨‹åå·® (SV)</div>
                            <div id="val-sv" class="text-lg font-bold">0</div>
                        </div>
                        <div class="bg-slate-800 p-3 rounded-lg text-center">
                            <div class="text-xs text-slate-400">æˆæœ¬åå·® (CV)</div>
                            <div id="val-cv" class="text-lg font-bold">0</div>
                        </div>
                        <div class="bg-slate-800 p-3 rounded-lg text-center">
                            <div class="text-xs text-slate-400">æ™‚ç¨‹ç¸¾æ•ˆ (SPI)</div>
                            <div id="val-spi" class="text-lg font-bold">0</div>
                        </div>
                        <div class="bg-slate-800 p-3 rounded-lg text-center">
                            <div class="text-xs text-slate-400">æˆæœ¬ç¸¾æ•ˆ (CPI)</div>
                            <div id="val-cpi" class="text-lg font-bold">0</div>
                        </div>
                    </div>

                    <div id="status-message" class="mb-4 p-3 rounded bg-slate-800 text-center text-sm font-bold">
                        åˆ†æä¸­...
                    </div>

                    <div class="flex-grow relative h-64 w-full">
                        <canvas id="evmChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: QUIZ (å¸«çˆ¶è©¦ç…‰) -->
        <div id="view-quiz" class="hidden fade-in">
             <div class="mb-8 text-center">
                <h2 class="text-3xl font-bold text-white mb-2">å¤§å¸«çš„è€ƒé©—</h2>
                <p class="text-slate-400">å”¯æœ‰ç†è§£ä½•æ™‚è©²ç”¨ã€Œæ‹›å¼ã€ï¼Œä½•æ™‚è©²ç”¨ã€Œå¿ƒæ³•ã€ï¼Œæ–¹èƒ½å‡ºå¸«ã€‚</p>
            </div>

            <div class="max-w-3xl mx-auto">
                <div id="quiz-container" class="card-glass p-8 rounded-2xl">
                    <!-- Question injected by JS -->
                </div>
                
                <!-- Navigation -->
                <div class="flex justify-between mt-6">
                    <button onclick="prevQuestion()" class="text-slate-400 hover:text-white px-4 py-2" id="btn-prev" disabled>ä¸Šä¸€é¡Œ</button>
                    <span class="text-slate-500 py-2" id="question-indicator">1 / 3</span>
                    <button onclick="nextQuestion()" class="bg-slate-700 hover:bg-slate-600 text-white px-6 py-2 rounded-lg" id="btn-next">ä¸‹ä¸€é¡Œ</button>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="border-t border-slate-800 mt-12 py-8 bg-slate-900">
        <div class="max-w-7xl mx-auto px-4 text-center text-slate-500 text-sm">
            <p>Â© 2025 PM æ­¦é“é¤¨. åŸºæ–¼ PMBOK æŒ‡å—ç¬¬ 6 ç‰ˆèˆ‡ç¬¬ 7 ç‰ˆæ¦‚å¿µè¨­è¨ˆã€‚</p>
            <p class="mt-2">å­¸ç¿’å»ºè­°ï¼šå…ˆç·´å¥½ WBS é¦¬æ­¥ï¼Œå†è«‡åƒ¹å€¼äº¤ä»˜å¿ƒæ³•ã€‚</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA: MATRIX (Processes) ---
        const pmbokData = {
            'init': { 
                label: 'å•Ÿå‹• (Initiating)', 
                color: 'bg-blue-600',
                desc: 'å°ˆæ¡ˆç²å¾—æ­£å¼æˆæ¬Šï¼Œå¸«çˆ¶é»é ­ç­”æ‡‰ä½ ä¸‹å±±æ­·ç·´ã€‚',
                items: [
                    { area: 'æ•´åˆç®¡ç†', process: 'ç™¼å±•å°ˆæ¡ˆç« ç¨‹', detail: 'ç”¢å‡ºå°ˆæ¡ˆç« ç¨‹ï¼Œç¢ºèªå°ˆæ¡ˆå­˜åœ¨ã€‚' },
                    { area: 'åˆ©å®³é—œä¿‚äºº', process: 'è¾¨è­˜åˆ©å®³é—œä¿‚äºº', detail: 'ææ¸…æ¥šèª°æ˜¯æœ‹å‹ï¼Œèª°æ˜¯æ•µäººã€‚' }
                ]
            },
            'plan': { 
                label: 'è¦åŠƒ (Planning)', 
                color: 'bg-emerald-600',
                desc: 'æ“¬å®šä½œæˆ°åœ°åœ–ã€‚é€™æ˜¯æ‹›å¼æœ€å¤šã€æœ€ç¹ç‘£çš„éšæ®µã€‚',
                items: [
                    { area: 'ç¯„ç–‡ç®¡ç†', process: 'å»ºç«‹ WBS', detail: 'WBS æ˜¯é¦¬æ­¥ï¼Œå°‡å¤§ä»»å‹™æ‹†è§£æˆå°çš„å·¥ä½œåŒ…ã€‚' },
                    { area: 'æ™‚ç¨‹ç®¡ç†', process: 'ç™¼å±•æ™‚ç¨‹ (CPM)', detail: 'æ‰¾å‡ºè¦å¾‘ (Critical Path)ï¼Œæ±ºå®šæœ€çŸ­å·¥æœŸã€‚' },
                    { area: 'æˆæœ¬ç®¡ç†', process: 'æ±ºå®šé ç®—', detail: 'è¨ˆç®—é€™è¶Ÿæ—…ç¨‹éœ€è¦å¤šå°‘ç›¤çºã€‚' },
                    { area: 'é¢¨éšªç®¡ç†', process: 'åŸ·è¡Œå®šæ€§/å®šé‡é¢¨éšªåˆ†æ', detail: 'é åˆ¤è·¯ä¸Šæœƒæœ‰ä»€éº¼åŸ‹ä¼ã€‚' }
                ]
            },
            'exec': { 
                label: 'åŸ·è¡Œ (Executing)', 
                color: 'bg-amber-600',
                desc: 'ä¾ç…§è¨ˆç•«å‡ºæ‹›ï¼Œå‹•å“¡è³‡æºï¼Œå¸¶é ˜åœ˜éšŠã€‚',
                items: [
                    { area: 'æ•´åˆç®¡ç†', process: 'æŒ‡å°èˆ‡ç®¡ç†å°ˆæ¡ˆå·¥ä½œ', detail: 'å¯¦éš›ç”¢ç”Ÿäº¤ä»˜æ¨™çš„ (Deliverables)ã€‚' },
                    { area: 'è³‡æºç®¡ç†', process: 'ç™¼å±•åœ˜éšŠ', detail: 'æå‡åœ˜éšŠå£«æ°£èˆ‡æˆ°é¬¥åŠ›ã€‚' },
                    { area: 'å“è³ªç®¡ç†', process: 'ç®¡ç†å“è³ª', detail: 'ç¢ºä¿ä½ çš„æ‹›å¼å‹•ä½œæ¨™æº–ï¼Œæ²’æœ‰èµ°æ¨£ã€‚' },
                    { area: 'æºé€šç®¡ç†', process: 'ç®¡ç†æºé€š', detail: 'ç¢ºä¿æƒ…å ±å‚³éé †æš¢ã€‚' }
                ]
            },
            'mon': { 
                label: 'ç›£æ§ (Monitoring)', 
                color: 'bg-rose-600',
                desc: 'çœ¼è§€å››é¢ï¼Œè€³è½å…«æ–¹ã€‚éš¨æ™‚ä¿®æ­£åå·®ã€‚',
                items: [
                    { area: 'æ•´åˆç®¡ç†', process: 'åŸ·è¡Œæ•´åˆè®Šæ›´æ§åˆ¶', detail: 'æ‰€æœ‰è®Šæ›´è«‹æ±‚éƒ½å¿…é ˆç¶“éå¯©æŸ¥ (CCB)ã€‚' },
                    { area: 'ç¯„ç–‡ç®¡ç†', process: 'é©—è­‰ç¯„ç–‡', detail: 'è®“å®¢æˆ¶é»é ­é©—æ”¶å®Œæˆçš„å·¥ä½œã€‚' },
                    { area: 'æˆæœ¬ç®¡ç†', process: 'æ§åˆ¶æˆæœ¬ (EVM)', detail: 'é‹ç”¨å¯¦ç²å€¼ç®¡ç†çœ‹ç©¿å°ˆæ¡ˆå¥åº·åº¦ã€‚' }
                ]
            },
            'close': { 
                label: 'çµæŸ (Closing)', 
                color: 'bg-slate-600',
                desc: 'ä¿®ç…‰å®Œæˆï¼Œæ­¸æª”ç¶“é©—ï¼Œè§£æ•£åœ˜éšŠã€‚',
                items: [
                    { area: 'æ•´åˆç®¡ç†', process: 'çµæŸå°ˆæ¡ˆæˆ–éšæ®µ', detail: 'ç§»äº¤æœ€çµ‚ç”¢å“ï¼Œæ›´æ–°çµ„ç¹”æµç¨‹è³‡ç”¢ã€‚' }
                ]
            }
        };

        // --- DATA: QUIZ ---
        const quizData = [
            {
                q: "ä¸€ä½æ–°æ‰‹å°ˆæ¡ˆç¶“ç†å› ç‚ºå°ˆæ¡ˆè¤‡é›œåº¦é«˜è€Œæ„Ÿåˆ°è¿·æƒ˜ã€‚ä»–æ‡‰è©²å„ªå…ˆæŒæ¡ä»€éº¼ï¼Ÿ",
                options: [
                    "ç›´æ¥è·³éæµç¨‹ï¼Œå°ˆæ³¨æ–¼åŸå‰‡èˆ‡å¿ƒæ³•ã€‚",
                    "ç†Ÿç·´ç¬¬ 6 ç‰ˆçš„æµç¨‹æ¶æ§‹ï¼ˆå¦‚ WBSã€è¦å¾‘æ³•ï¼‰ä½œç‚ºåŸºç¤ã€‚",
                    "å°‹æ±‚ PRINCE2 çš„å¹«åŠ©ï¼Œæ”¾æ£„ PMBOKã€‚",
                    "åªé—œæ³¨ç¸¾æ•ˆé ˜åŸŸï¼Œä¸ç®¡è¼¸å…¥è¼¸å‡ºã€‚"
                ],
                ans: 1,
                explain: "æ­£ç¢ºï¼ä¾†æºè³‡æ–™å¼·èª¿ï¼šç¬¬ 6 ç‰ˆçš„ç³»çµ±åŒ–æµç¨‹æ¶æ§‹ï¼Œä¾ç„¶æ˜¯åˆå­¸è€…ç†è§£å°ˆæ¡ˆç®¡ç†çš„å …å¯¦åœ°åŸºã€‚å…ˆç·´å¥—è·¯ï¼Œå†è«‡å¿ƒæ³•ã€‚"
            },
            {
                q: "PMBOK ç¬¬ 7 ç‰ˆçš„æ¨å‡ºï¼Œå°æ–¼ç¬¬ 6 ç‰ˆçš„å…§å®¹æœ‰ä½•å½±éŸ¿ï¼Ÿ",
                options: [
                    "ç¬¬ 6 ç‰ˆå…§å®¹ä½œå»¢ï¼Œä¸å†æœ‰æ•ˆã€‚",
                    "ç¬¬ 7 ç‰ˆå®Œå…¨å–ä»£äº†ç¬¬ 6 ç‰ˆçš„å·¥å…·æŠ€è¡“ã€‚",
                    "å…©è€…äº’è£œï¼ŒèˆŠç‰ˆçš„æµç¨‹å·¥å…·ä»æ˜¯å¯¦å‹™è½åœ°çš„å¿…è¦æ‰‹æ®µã€‚",
                    "ç¬¬ 6 ç‰ˆè®Šæˆäº†éŒ¯èª¤çš„ç¤ºç¯„ã€‚"
                ],
                ans: 2,
                explain: "æ­£ç¢ºï¼ç¬¬ 7 ç‰ˆå¼·èª¿åŸå‰‡ï¼Œä½†ä¸¦ä¸ä»£è¡¨èˆŠç‰ˆç„¡æ•ˆã€‚WBSã€EVM ç­‰å·¥å…·ä¾ç„¶æ˜¯å°‡å·¥ä½œè½åœ°çš„å¿…è¦æ‰‹æ®µã€‚"
            },
            {
                q: "å¦‚æœä½ æƒ³è¨ˆç®—å°ˆæ¡ˆç›®å‰çš„æˆæœ¬æ•ˆç‡ï¼Œä½ æ­£åœ¨ä½¿ç”¨å“ªä¸€é¡çŸ¥è­˜ï¼Ÿ",
                options: [
                    "PMBOK ç¬¬ 7 ç‰ˆçš„ã€Œç®¡å®¶ç²¾ç¥ã€åŸå‰‡ã€‚",
                    "PMBOK ç¬¬ 6 ç‰ˆçš„ã€Œç›£æ§æµç¨‹ç¾¤çµ„ã€èˆ‡ ITTOã€‚",
                    "ISO 21500 çš„æ¨™æº–å®šç¾©ã€‚",
                    "æ•æ·é–‹ç™¼çš„è¡åˆºç‡ƒç›¡åœ–ã€‚"
                ],
                ans: 1,
                explain: "æ­£ç¢ºï¼ä½¿ç”¨è¨ˆç®—å·¥å…·ï¼ˆå¦‚ EVMï¼‰å±¬æ–¼å…·é«”çš„ã€Œå·¥å…·èˆ‡æŠ€è¡“ã€ï¼Œé€™æ˜¯ç¬¬ 6 ç‰ˆæ¶æ§‹çš„æ ¸å¿ƒå…§å®¹ã€‚"
            }
        ];

        // --- GLOBAL STATE ---
        let currentTab = 'intro';
        let currentQuizIndex = 0;
        let evmChart = null;

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            initMatrix();
            initEVM();
            renderQuiz();
            
            // Render first tab of matrix by default
            selectProcess('plan');
        });

        // --- NAVIGATION LOGIC ---
        function switchView(viewName) {
            // Update Tab UI
            document.querySelectorAll('.nav-btn').forEach(btn => {
                if(btn.dataset.target === viewName) {
                    btn.classList.add('active-tab', 'text-amber-400');
                    btn.classList.remove('text-slate-200');
                } else {
                    btn.classList.remove('active-tab', 'text-amber-400');
                    btn.classList.add('text-slate-200');
                }
            });

            // Hide all views
            ['intro', 'matrix', 'tools', 'quiz'].forEach(v => {
                document.getElementById(`view-${v}`).classList.add('hidden');
            });

            // Show selected view
            const target = document.getElementById(`view-${viewName}`);
            target.classList.remove('hidden');
            
            // Re-trigger animation
            target.classList.remove('fade-in');
            void target.offsetWidth; // trigger reflow
            target.classList.add('fade-in');

            currentTab = viewName;
        }

        // --- MATRIX LOGIC ---
        function initMatrix() {
            const container = document.getElementById('process-buttons');
            Object.keys(pmbokData).forEach(key => {
                const group = pmbokData[key];
                const btn = document.createElement('button');
                btn.className = `process-tab-btn px-4 py-2 m-1 rounded-lg border border-slate-600 hover:border-amber-500 transition text-sm text-slate-300 bg-slate-800`;
                btn.textContent = group.label;
                btn.onclick = () => selectProcess(key);
                btn.dataset.key = key;
                container.appendChild(btn);
            });
        }

        function selectProcess(key) {
            // Highlight button
            document.querySelectorAll('.process-tab-btn').forEach(btn => {
                if(btn.dataset.key === key) {
                    btn.classList.add('bg-slate-700', 'text-amber-400', 'border-amber-500');
                    btn.classList.remove('bg-slate-800', 'text-slate-300');
                } else {
                    btn.classList.remove('bg-slate-700', 'text-amber-400', 'border-amber-500');
                    btn.classList.add('bg-slate-800', 'text-slate-300');
                }
            });

            const data = pmbokData[key];
            const contentDiv = document.getElementById('matrix-content');
            
            // Clear and rebuild
            contentDiv.innerHTML = '';
            
            // Add Description Card
            const descCard = document.createElement('div');
            descCard.className = 'col-span-1 md:col-span-2 lg:col-span-3 bg-slate-800/50 p-4 rounded-lg border border-dashed border-slate-600 mb-2';
            descCard.innerHTML = `<p class="text-amber-200">ğŸ’¡ éšæ®µå¿ƒæ³•ï¼š${data.desc}</p>`;
            contentDiv.appendChild(descCard);

            // Add Process Cards
            data.items.forEach(item => {
                const card = document.createElement('div');
                card.className = `bg-slate-800 p-5 rounded-lg border-l-4 border-${key === 'init' ? 'blue' : key === 'plan' ? 'emerald' : key === 'exec' ? 'amber' : key === 'mon' ? 'rose' : 'slate'}-500 shadow-md hover:bg-slate-750 transition`;
                // Note: Tailwind dynamic colors in JS need safelisting or inline styles usually, but for this demo we rely on pre-existing classes or simple styles. 
                // Let's use inline style for the border color to be safe with CDN.
                let borderColor = '#64748b';
                if(key==='init') borderColor='#2563eb';
                if(key==='plan') borderColor='#10b981';
                if(key==='exec') borderColor='#d97706';
                if(key==='mon') borderColor='#e11d48';
                
                card.style.borderLeftColor = borderColor;

                card.innerHTML = `
                    <div class="text-xs text-slate-500 uppercase tracking-wide mb-1">${item.area}</div>
                    <h3 class="text-lg font-bold text-white mb-2">${item.process}</h3>
                    <p class="text-sm text-slate-400">${item.detail}</p>
                `;
                contentDiv.appendChild(card);
            });
        }

        // --- EVM CALCULATOR LOGIC ---
        function initEVM() {
            const ctx = document.getElementById('evmChart').getContext('2d');
            
            Chart.defaults.color = '#94a3b8';
            Chart.defaults.font.family = 'Noto Sans TC';

            evmChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['è¨ˆç•«åƒ¹å€¼ (PV)', 'å¯¦ç²å€¼ (EV)', 'å¯¦éš›æˆæœ¬ (AC)'],
                    datasets: [{
                        label: 'é‡‘é¡ ($)',
                        data: [10000, 9000, 11000],
                        backgroundColor: [
                            'rgba(148, 163, 184, 0.7)', // PV - Slate
                            'rgba(245, 158, 11, 0.7)',  // EV - Amber
                            'rgba(225, 29, 72, 0.7)'    // AC - Rose
                        ],
                        borderColor: [
                            'rgba(148, 163, 184, 1)',
                            'rgba(245, 158, 11, 1)',
                            'rgba(225, 29, 72, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, grid: { color: '#334155' } },
                        x: { grid: { display: false } }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });

            ['pv', 'ev', 'ac'].forEach(id => {
                document.getElementById(`${id}-slider`).addEventListener('input', updateEVM);
            });

            updateEVM();
        }

        function updateEVM() {
            const pv = parseInt(document.getElementById('pv-slider').value);
            const ev = parseInt(document.getElementById('ev-slider').value);
            const ac = parseInt(document.getElementById('ac-slider').value);

            // Update UI Numbers
            document.getElementById('pv-value').innerText = `$${pv.toLocaleString()}`;
            document.getElementById('ev-value').innerText = `$${ev.toLocaleString()}`;
            document.getElementById('ac-value').innerText = `$${ac.toLocaleString()}`;

            // Calculate Formulas
            const sv = ev - pv;
            const cv = ev - ac;
            const spi = pv === 0 ? 0 : (ev / pv).toFixed(2);
            const cpi = ac === 0 ? 0 : (ev / ac).toFixed(2);

            // Update Metrics UI
            const updateMetric = (id, val, isIndex) => {
                const el = document.getElementById(id);
                el.innerText = val;
                
                // Color Logic
                if (isIndex) { // SPI, CPI
                    el.className = `text-lg font-bold ${val >= 1 ? 'text-emerald-400' : 'text-rose-400'}`;
                } else { // SV, CV
                    el.className = `text-lg font-bold ${val >= 0 ? 'text-emerald-400' : 'text-rose-400'}`;
                }
            };

            updateMetric('val-sv', sv.toLocaleString(), false);
            updateMetric('val-cv', cv.toLocaleString(), false);
            updateMetric('val-spi', spi, true);
            updateMetric('val-cpi', cpi, true);

            // Analysis Message
            const statusEl = document.getElementById('status-message');
            let msg = "";
            let colorClass = "";

            if (cpi >= 1 && spi >= 1) {
                msg = "ğŸ† çµ•ä½³ç‹€æ…‹ï¼šé€²åº¦è¶…å‰ä¸”é ç®—ç²¾çœï¼";
                colorClass = "bg-emerald-900 text-emerald-200 border border-emerald-700";
            } else if (cpi < 1 && spi < 1) {
                msg = "âš ï¸ å±éšªè­¦è¨Šï¼šé€²åº¦è½å¾Œä¸”é ç®—è¶…æ”¯ï¼éœ€è¦ç³¾æ­£æªæ–½ã€‚";
                colorClass = "bg-rose-900 text-rose-200 border border-rose-700";
            } else if (cpi < 1) {
                msg = "ğŸ’¸ é ç®—è¶…æ”¯ï¼šé€²åº¦é›–å¯ï¼Œä½†èŠ±è²»éé«˜ã€‚";
                colorClass = "bg-orange-900 text-orange-200 border border-orange-700";
            } else {
                msg = "ğŸŒ é€²åº¦è½å¾Œï¼šé ç®—æ§åˆ¶å¾—å®œï¼Œä½†å‹•ä½œå¤ªæ…¢ã€‚";
                colorClass = "bg-yellow-900 text-yellow-200 border border-yellow-700";
            }
            
            statusEl.innerText = msg;
            statusEl.className = `mb-4 p-3 rounded text-center text-sm font-bold shadow-lg ${colorClass}`;

            // Update Chart
            evmChart.data.datasets[0].data = [pv, ev, ac];
            evmChart.update();
        }

        // --- QUIZ LOGIC ---
        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            const data = quizData[currentQuizIndex];

            // Reset buttons
            document.getElementById('btn-prev').disabled = currentQuizIndex === 0;
            document.getElementById('btn-next').disabled = currentQuizIndex === quizData.length - 1;
            document.getElementById('question-indicator').innerText = `${currentQuizIndex + 1} / ${quizData.length}`;

            container.innerHTML = `
                <h3 class="text-xl font-bold text-white mb-6">å•é¡Œ ${currentQuizIndex + 1}: ${data.q}</h3>
                <div class="space-y-3">
                    ${data.options.map((opt, idx) => `
                        <button onclick="checkAnswer(${idx})" 
                            class="quiz-opt w-full text-left p-4 rounded-lg bg-slate-800 hover:bg-slate-700 border border-slate-700 transition relative" 
                            id="opt-${idx}">
                            <span class="font-bold mr-2 text-slate-500">${String.fromCharCode(65+idx)}.</span> ${opt}
                        </button>
                    `).join('')}
                </div>
                <div id="feedback-area" class="hidden mt-6 p-4 rounded-lg bg-slate-800 border-l-4"></div>
            `;
        }

        function checkAnswer(selectedIdx) {
            const data = quizData[currentQuizIndex];
            const feedback = document.getElementById('feedback-area');
            const btns = document.querySelectorAll('.quiz-opt');

            // Disable all buttons
            btns.forEach(btn => btn.disabled = true);

            // Highlight correct/incorrect
            if (selectedIdx === data.ans) {
                document.getElementById(`opt-${selectedIdx}`).classList.add('bg-emerald-900', 'border-emerald-500');
                feedback.className = "mt-6 p-4 rounded-lg bg-emerald-900/30 border-l-4 border-emerald-500 text-emerald-200 fade-in";
                feedback.innerHTML = `<strong>âœ… æ­£ç¢ºï¼</strong><br>${data.explain}`;
            } else {
                document.getElementById(`opt-${selectedIdx}`).classList.add('bg-rose-900', 'border-rose-500');
                document.getElementById(`opt-${data.ans}`).classList.add('bg-emerald-900', 'border-emerald-500'); // Show correct one
                feedback.className = "mt-6 p-4 rounded-lg bg-rose-900/30 border-l-4 border-rose-500 text-rose-200 fade-in";
                feedback.innerHTML = `<strong>âŒ æ‹›å¼æœªç²¾ã€‚</strong><br>${data.explain}`;
            }

            feedback.classList.remove('hidden');
        }

        function nextQuestion() {
            if (currentQuizIndex < quizData.length - 1) {
                currentQuizIndex++;
                renderQuiz();
            }
        }

        function prevQuestion() {
            if (currentQuizIndex > 0) {
                currentQuizIndex--;
                renderQuiz();
            }
        }

    </script>
</body>
</html>