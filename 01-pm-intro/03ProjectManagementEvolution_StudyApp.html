<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ˆæ¡ˆç®¡ç†æ¼”é€²ï¼šå»šæˆ¿è£¡çš„é€²åŒ–å²</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #FDFBF7; /* Warm neutral background */
            color: #4A4A4A;
        }

        /* Custom Chart Container Styles - Mandatory */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Utility for transitions */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .active-stage {
            background-color: #E67E22; /* Carrot Orange */
            color: white;
            border-color: #E67E22;
        }

        .inactive-stage {
            background-color: white;
            color: #7F8C8D;
            border-color: #BDC3C7;
        }
        
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
    </style>
    <!-- Chosen Palette: Warm Culinary (Cream background, Charcoal text, Carrot Orange accents, Sage Green success states) - Minimalistic and harmonious. -->
    <!-- Application Structure Plan: 
         1. Hero Section: Sets the "Cooking" metaphor context.
         2. Timeline Kitchen (Historical Evolution): Interactive timeline. Clicking a stage reveals details (Context, Keywords, Products) and updates a Chart.js visualization showing the shift in focus (Hard Skills vs. Soft Skills).
         3. The Recipe Book (PMBOK Evolution): A comparative view (Old vs. New) using interactive cards to explain the paradigm shifts (e.g., Output vs. Outcome).
         4. Pantry of Terms: A filterable definition list for quick revision of acronyms.
         5. The Taste Test (Quiz): Interactive simulation of the exam questions provided in the source notes.
         Reasoning: This structure breaks the dense text into digestible, interactive chunks, allowing the user to explore the "story" of PM chronologically first, then conceptually, and finally testing their knowledge. 
    -->
    <!-- Visualization & Content Choices:
         1. Interactive Timeline: HTML/JS. Goal: Organize history. Justification: Linear progression is best understood spatially.
         2. "Evolution of Focus" Chart: Chart.js Line Chart. Goal: Inform/Change. Visualizes the qualitative shift from "Math/Scheduling" to "Value/Principles" described in the text.
         3. Comparison Cards: HTML Grid. Goal: Compare. Side-by-side comparison of PMBOK versions clarifies the "Before/After" concepts.
         4. Quiz Module: HTML/JS Forms. Goal: Engagement/Testing. Active recall is essential for exam prep.
         Library: Chart.js for the trend visualization. Tailwind for layout.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Header / Hero -->
    <header class="bg-white border-b border-gray-200 py-6 px-4 md:px-8">
        <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center">
            <div class="mb-4 md:mb-0 text-center md:text-left">
                <h1 class="text-3xl font-bold text-gray-800 tracking-tight">å°ˆæ¡ˆç®¡ç†æ¼”é€²ï¼šè€ƒè©¦é€Ÿæˆå»šæˆ¿ ğŸ³</h1>
                <p class="text-gray-500 mt-2 text-sm">å°‡æ¯ç‡¥çš„æ­·å²è½‰åŒ–ç‚ºç¾å‘³çš„çƒ¹é£ªæ•…äº‹</p>
            </div>
            <div class="text-sm bg-orange-50 text-orange-800 px-4 py-2 rounded-full border border-orange-100">
                è€ƒè©¦é‡é»ï¼šé…å°é¡Œ & æ¼”è®Šè¶¨å‹¢
            </div>
        </div>
    </header>

    <main class="flex-grow w-full max-w-6xl mx-auto px-4 py-8 space-y-12">

        <!-- SECTION 1: HISTORICAL TIMELINE -->
        <section id="history-section">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800 border-l-4 border-orange-500 pl-3">ç¬¬ä¸€éƒ¨åˆ†ï¼šæ­·å²åˆ†æœŸçš„ã€Œçƒ¹é£ªæ¼”é€²å²ã€</h2>
                <p class="mt-2 text-gray-600">
                    æœ¬å€å¡Šå°‡å››å€‹æ­·å²æ™‚æœŸæ¯”å–»ç‚ºçƒ¹é£ªè—è¡“çš„ç™¼å±•ã€‚é»æ“Šä¸‹æ–¹çš„æ™‚é–“è»¸æŒ‰éˆ•ï¼ŒæŸ¥çœ‹æ¯å€‹æ™‚æœŸçš„é—œéµè€ƒé»ã€æƒ…å¢ƒèƒŒæ™¯ä»¥åŠè©²æ™‚æœŸçš„ç®¡ç†é‡å¿ƒã€‚è§€å¯Ÿä¸‹æ–¹çš„åœ–è¡¨ï¼Œäº†è§£ç®¡ç†ç„¦é»å¦‚ä½•éš¨æ™‚é–“è½‰ç§»ã€‚
                </p>
            </div>

            <!-- Interactive Timeline Controls -->
            <div class="flex flex-col md:flex-row justify-between gap-2 mb-8" id="timeline-controls">
                <!-- Buttons injected by JS -->
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Content Display -->
                <div id="stage-content" class="bg-white p-6 rounded-xl card-shadow border border-gray-100 fade-in h-full flex flex-col justify-between">
                    <!-- Content injected by JS -->
                </div>

                <!-- Visualization: Focus Shift -->
                <div class="bg-white p-6 rounded-xl card-shadow border border-gray-100 flex flex-col justify-center items-center">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4 w-full text-center">ç®¡ç†ç„¦é»è¶¨å‹¢åœ–</h3>
                    <div class="chart-container">
                        <canvas id="evolutionChart"></canvas>
                    </div>
                    <p class="text-xs text-center text-gray-400 mt-2">ç¤ºæ„åœ–ï¼šå±•ç¤ºç¡¬æŠ€è¡“ï¼ˆæ•¸å­¸/å·¥å…·ï¼‰èˆ‡è»Ÿå¯¦åŠ›ï¼ˆäºº/åƒ¹å€¼ï¼‰çš„æ¬Šé‡è®ŠåŒ–</p>
                </div>
            </div>
        </section>

        <!-- SECTION 2: PMBOK EVOLUTION -->
        <section id="evolution-section" class="bg-stone-50 p-6 rounded-2xl border border-stone-200">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800 border-l-4 border-orange-500 pl-3">ç¬¬äºŒéƒ¨åˆ†ï¼šç‰ˆæœ¬æ›´æ–°æ—¥èªŒ (Old vs New)</h2>
                <p class="mt-2 text-gray-600">
                    è€ƒè©¦å¸¸è€ƒã€Œä»¥å‰æ˜¯ä»€éº¼ï¼Œç¾åœ¨è®Šä»€éº¼ã€ã€‚æ­¤å€å¡Šæ•´ç†äº† PMBOK æŒ‡å—çš„é—œéµè®Šé©ã€‚é‡é»åœ¨æ–¼å¾ã€Œå‰›æ€§æµç¨‹ã€è½‰å‘ã€Œå½ˆæ€§åƒ¹å€¼ã€ã€‚
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Card 1: Knowledge Areas -->
                <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-100 transition hover:shadow-md">
                    <div class="text-2xl mb-2">ğŸ§  çŸ¥è­˜é ˜åŸŸ</div>
                    <div class="flex justify-between items-center text-sm text-gray-400 mb-2 font-mono">
                        <span>èˆŠç‰ˆ (9å¤§)</span>
                        <span>â†’</span>
                        <span>æ–°ç‰ˆ (10å¤§)</span>
                    </div>
                    <h4 class="font-bold text-gray-800 mb-2">èª°è¢«ç¨ç«‹å‡ºä¾†ï¼Ÿ</h4>
                    <p class="text-gray-600 text-sm">
                        <span class="font-bold text-orange-600">åˆ©å®³é—œä¿‚äºº (Stakeholders)</span>ã€‚
                        <br><br>
                        <span class="text-xs bg-gray-100 p-1 rounded">è¨˜æ†¶é»</span> å› ç‚ºå–®ç´”çš„æºé€šç®¡ç†å·²ä¸è¶³ä»¥æ‡‰å°äººçš„è¤‡é›œæ€§ã€‚
                    </p>
                </div>

                <!-- Card 2: Resource Management -->
                <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-100 transition hover:shadow-md">
                    <div class="text-2xl mb-2">ğŸ§± è³‡æºç®¡ç†</div>
                    <div class="flex justify-between items-center text-sm text-gray-400 mb-2 font-mono">
                        <span>äººåŠ›è³‡æº</span>
                        <span>â†’</span>
                        <span>è³‡æºç®¡ç†</span>
                    </div>
                    <h4 class="font-bold text-gray-800 mb-2">ç®¡ä»€éº¼ï¼Ÿ</h4>
                    <p class="text-gray-600 text-sm">
                        å¾åªç®¡ã€Œäººã€æ“´å±•åˆ°<span class="font-bold text-orange-600">å¯¦é«”è³‡æº</span>ï¼ˆè¨­å‚™ã€ææ–™ã€åŸºç¤è¨­æ–½ï¼‰ã€‚
                        <br><br>
                        <span class="text-xs bg-gray-100 p-1 rounded">è¨˜æ†¶é»</span> å»šå¸«ä¸åªè¦ç®¡åŠ©æ‰‹ï¼Œé‚„è¦ç®¡çƒ¤ç®±å’Œéºµç²‰ã€‚
                    </p>
                </div>

                <!-- Card 3: Success Definition -->
                <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-100 transition hover:shadow-md">
                    <div class="text-2xl mb-2">ğŸ† æˆåŠŸå®šç¾©</div>
                    <div class="flex justify-between items-center text-sm text-gray-400 mb-2 font-mono">
                        <span>ç”¢å‡º (Outputs)</span>
                        <span>â†’</span>
                        <span>æˆæœ/åƒ¹å€¼ (Outcomes)</span>
                    </div>
                    <h4 class="font-bold text-gray-800 mb-2">é‡é»åœ¨å“ªï¼Ÿ</h4>
                    <p class="text-gray-600 text-sm">
                        åšå®Œäº‹æƒ… (Output) ä¸é‡è¦ï¼Œå°å®¢æˆ¶ç”¢ç”Ÿ<span class="font-bold text-orange-600">åƒ¹å€¼ (Outcome)</span> æ‰é‡è¦ã€‚
                        <br><br>
                        <span class="text-xs bg-gray-100 p-1 rounded">è¨˜æ†¶é»</span> èœåšå¥½äº†(Output)æ²’ç”¨ï¼Œå®¢äººè¦ºå¾—å¥½åƒ(Outcome)æ‰ç®—æ•¸ã€‚
                    </p>
                </div>

                <!-- Card 4: Structure -->
                <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-100 transition hover:shadow-md md:col-span-3">
                    <div class="flex flex-col md:flex-row items-start md:items-center gap-4">
                        <div class="text-3xl">ğŸ“</div>
                        <div class="flex-1">
                            <h4 class="font-bold text-gray-800">PMBOK ç¬¬ 7 ç‰ˆå¤§è®Šé©ï¼šå¾æµç¨‹åˆ°åŸå‰‡</h4>
                            <p class="text-gray-600 text-sm mt-1">
                                èˆŠæ¶æ§‹æ˜¯ã€Œ5å¤§æµç¨‹ç¾¤çµ„ã€49å€‹éç¨‹ã€ï¼Œåƒæ­»æ¿çš„é£Ÿè­œã€‚<br>
                                æ–°æ¶æ§‹æ˜¯ <span class="font-bold text-orange-600">ã€Œ12 é …åŸå‰‡ã€8 é …ç¸¾æ•ˆé ˜åŸŸã€</span>ï¼Œå¼·èª¿æ ¹æ“šæƒ…æ³é€²è¡Œ <span class="font-bold text-orange-600">ã€Œè£é© (Tailoring)ã€</span>ï¼Œå°±åƒç±³å…¶æ—å¤§å¸«éˆæ´»é‹ç”¨æŠ€æ³•ã€‚
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: VOCABULARY PANTRY -->
        <section id="terms-section">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800 border-l-4 border-orange-500 pl-3">ç¬¬ä¸‰éƒ¨åˆ†ï¼šå°ˆç”¨è¡“èªå„²è—å®¤</h2>
                <p class="mt-2 text-gray-600">
                    é€™äº›è©å½™æ˜¯è€ƒè©¦çš„é—œéµå­—ï¼Œçœ‹åˆ°å®ƒå€‘è¦èƒ½åå°„å‡ºæ­£ç¢ºçš„å«ç¾©ã€‚
                </p>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4" id="pantry-grid">
                <!-- Injected via JS -->
            </div>
        </section>

        <!-- SECTION 4: EXAM SIMULATION -->
        <section id="quiz-section" class="mb-12">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800 border-l-4 border-orange-500 pl-3">ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡æ“¬è€ƒé¡Œ (Taste Test)</h2>
                <p class="mt-2 text-gray-600">
                    è‡ªæˆ‘æ¸¬è©¦æ™‚é–“ã€‚é»æ“Šé¸é …å³å¯ç«‹å³æŸ¥çœ‹è§£æã€‚è«‹å˜—è©¦é®ä½ç­”æ¡ˆå›ç­”ã€‚
                </p>
            </div>

            <div class="space-y-6" id="quiz-container">
                <!-- Quiz Injected via JS -->
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 text-gray-300 py-8 text-center mt-auto">
        <p class="text-sm">å°ˆæ¡ˆç®¡ç†æ¦‚è«–å­¸ç¿’å·¥å…·</p>
        <p class="text-xs text-gray-500 mt-2">Based on Provided NotebookLM Analysis</p>
    </footer>

    <script>
        // --- DATA STORAGE ---

        // 1. History Stages Data
        const historyData = [
            {
                id: 'stage1',
                period: '1950~1960',
                name: 'èŒèŠ½æœŸ',
                metaphor: 'ç™¼æ˜é‡å…·èˆ‡é£Ÿè­œ',
                icon: 'ğŸ“',
                context: 'å†·æˆ°ã€è»å‚™ç«¶è³½ã€å¤ªç©ºç«¶è³½ (NASA, DoD)',
                focus: 'ã€Œä¸€èˆ¬ç®¡ç†ã€ç„¡æ³•æ»¿è¶³è¤‡é›œéœ€æ±‚ï¼Œç™¼å±•å‡ºã€Œç³»çµ±ç®¡ç†ã€ã€‚',
                keywords: ['CPM (é—œéµè·¯å¾‘æ³•)', 'PERT (è¨ˆç•«è©•æ ¸è¡“)', 'åœ‹é˜²èˆªå¤ª'],
                chartData: { math: 90, process: 40, people: 10, value: 10 } // Estimated qualitative values
            },
            {
                id: 'stage2',
                period: '1960~1985',
                name: 'æˆé•·æœŸ',
                metaphor: 'æˆç«‹å»šå¸«å”æœƒ',
                icon: 'ğŸ¤',
                context: 'ç§‘æŠ€ç™¼å±•ï¼Œå•†æ¥­ç«¶çˆ­æ¿€çƒˆï¼Œéœ€è¦æ¨å»£ã€‚',
                focus: 'å°ˆæ¡ˆç®¡ç†é–‹å§‹å—åˆ°ç”¢æ¥­é‡è¦–ï¼ŒPMI æˆç«‹ã€‚',
                keywords: ['PMI (1969å¹´æˆç«‹)', 'PMBOKé¦–ç‰ˆ (1984)', 'å•†æ¥­ç«¶çˆ­'],
                chartData: { math: 70, process: 80, people: 30, value: 20 }
            },
            {
                id: 'stage3',
                period: '1985~2000',
                name: 'æˆç†ŸæœŸ',
                metaphor: 'é€£é–åº— SOP',
                icon: 'ğŸ”',
                context: 'æ­ç¾ä¼æ¥­èªçŸ¥åˆ°é€™æ˜¯ã€Œå¿…è¦æ‰‹æ®µã€(Must have)ã€‚',
                focus: 'æ¨™æº–åŒ–ã€è»Ÿé«”å·¥å…·å¤§é‡ç™¼å±•ã€‚',
                keywords: ['PRINCE2', 'ISO 10006', 'è»Ÿé«”å·¥å…·', 'æ¨™æº–åŒ–'],
                chartData: { math: 50, process: 95, people: 50, value: 40 }
            },
            {
                id: 'stage4',
                period: '2001~ç¾åœ¨',
                name: 'å…¨çƒæ¨å‹•æœŸ',
                metaphor: 'ç±³å…¶æ—å¤§å¸«',
                icon: 'ğŸŒ',
                context: 'çŸ¥è­˜ç¶“æ¿Ÿã€WTOã€ç„¡åœ‹ç•Œã€‚',
                focus: 'å¼·èª¿åƒ¹å€¼äº¤ä»˜ã€è£é©ã€åŸå‰‡å°å‘ã€‚',
                keywords: ['è£é© (Tailoring)', 'åƒ¹å€¼äº¤ä»˜', 'ä¸–ç•Œèªè¨€', 'ç¬¬7ç‰ˆè®Šé©'],
                chartData: { math: 30, process: 60, people: 90, value: 100 }
            }
        ];

        // 2. Terminology Data
        const termsData = [
            { term: 'CPM / PERT', desc: 'æœ€æ—©æœŸçš„æ’ç¨‹æŠ€è¡“ï¼Œç”¨æ•¸å­¸ç®—æ™‚é–“çš„ã€‚æºæ–¼è»äº‹éœ€æ±‚ã€‚', tag: 'å·¥å…·' },
            { term: 'PMBOK', desc: 'å°ˆæ¡ˆç®¡ç†çŸ¥è­˜é«”ç³»æŒ‡å—ï¼Œè€ƒè©¦çš„æ¨™æº–ä¾æ“šã€‚1984é¦–ç‰ˆã€‚', tag: 'æ¨™æº–' },
            { term: 'PMIS', desc: 'å°ˆæ¡ˆç®¡ç†è³‡è¨Šç³»çµ±ã€‚ç¾ä»£ç”¨è»Ÿé«”ç®—æ•¸æ“šï¼Œå–ä»£æ‰‹ç®—ã€‚', tag: 'å·¥å…·' },
            { term: 'è£é© (Tailoring)', desc: 'ç¬¬7ç‰ˆæ ¸å¿ƒç²¾ç¥ã€‚ä¸åªè¦ç…§é£Ÿè­œ(æµç¨‹)ï¼Œæ›´è¦çœ‹æƒ…æ³èª¿æ•´ã€‚', tag: 'è§€å¿µ' }
        ];

        // 3. Quiz Data
        const quizQuestions = [
            {
                q: "æ ¹æ“šå°ˆæ¡ˆç®¡ç†ç™¼å±•å²ï¼Œé—œéµè·¯å¾‘æ³• (CPM) èˆ‡è¨ˆç•«è©•æ ¸è¡“ (PERT) ä¸»è¦æ˜¯åœ¨å“ªå€‹æ™‚æœŸç‚ºäº†æ»¿è¶³åœ‹é˜²èˆ‡è»äº‹éœ€æ±‚è€Œç™¼å±•å‡ºä¾†çš„ï¼Ÿ",
                options: ["å…¨çƒæ¨å‹•æœŸ", "æˆç†ŸæœŸ", "èŒèŠ½æœŸ", "æˆé•·æœŸ"],
                correct: 2, // Index of correct answer
                hint: "é—œéµå­—ï¼šè»äº‹ã€å†·æˆ°ã€æ•¸å­¸å·¥å…· = æœ€æ—©æœŸ"
            },
            {
                q: "é—œæ–¼ PMBOK æŒ‡å—æ¼”é€²çš„æ•˜è¿°ï¼Œä¸‹åˆ—ä½•è€…æ­£ç¢ºï¼Ÿ",
                options: [
                    "ç¬¬6ç‰ˆå°‡ã€Œè³‡æºç®¡ç†ã€ç¸®æ¸›ç‚ºåƒ…ç®¡ç†ã€ŒäººåŠ›è³‡æºã€",
                    "ç¬¬5ç‰ˆä»¥å¾Œå°‡ã€Œåˆ©å®³é—œä¿‚äººç®¡ç†ã€ç¨ç«‹å‡ºä¾†ï¼Œè®Šæˆ10å¤§çŸ¥è­˜é ˜åŸŸ",
                    "å°ˆæ¡ˆç®¡ç†ä¸€ç›´ç¶­æŒ 9 å¤§çŸ¥è­˜é ˜åŸŸä¸è®Š",
                    "ç¾ä»£å°ˆæ¡ˆç®¡ç†åªé‡è¦–ã€Œç”¢å‡º (Output)ã€ï¼Œä¸é‡è¦–ã€Œæˆæœ (Outcome)ã€"
                ],
                correct: 1,
                hint: "äººèˆ‡æºé€šå¤ªé‡è¦äº†ï¼Œæ‰€ä»¥è¢«ç¨ç«‹å‡ºä¾†ã€‚"
            },
            {
                q: "ç¾ä»£å°ˆæ¡ˆç®¡ç†ï¼ˆå¦‚ PMBOK ç¬¬7ç‰ˆï¼‰çš„æ€ç¶­ç™¼ç”Ÿäº†é‡å¤§å…¸ç¯„è½‰ç§»ï¼Œä¸»è¦ç‰¹å¾µç‚ºä½•ï¼Ÿ",
                options: [
                    "å¾ã€ŒåŸå‰‡å°å‘ã€è½‰å›ã€Œåš´æ ¼çš„æµç¨‹æ§åˆ¶ã€",
                    "å¼·èª¿å–®ä¸€æ¨™æº–åšæ³•ï¼Œä¸å¯æ›´æ”¹",
                    "å¾å¼·èª¿ã€Œäº¤ä»˜æ¨™çš„ (Outputs)ã€è½‰å‘å¼·èª¿ã€Œåƒ¹å€¼äº¤ä»˜ (Outcomes)ã€èˆ‡åŸå‰‡",
                    "å»¢é™¤æ‰€æœ‰èˆŠæœ‰çš„å·¥å…·å¦‚ WBS èˆ‡ EVM"
                ],
                correct: 2,
                hint: "ç¬¬7ç‰ˆ = åƒ¹å€¼ã€åŸå‰‡ã€è£é©ã€‚èˆŠå·¥å…·è®ŠæˆåŸºç¤æ‰‹æ®µï¼Œæœªå»¢é™¤ã€‚"
            }
        ];

        // --- APP STATE ---
        let currentStageIndex = 0;
        let evolutionChartInstance = null;

        // --- DOM ELEMENTS ---
        const timelineControls = document.getElementById('timeline-controls');
        const stageContent = document.getElementById('stage-content');
        const pantryGrid = document.getElementById('pantry-grid');
        const quizContainer = document.getElementById('quiz-container');

        // --- INITIALIZATION ---
        function init() {
            renderTimelineControls();
            renderStage(0);
            renderTerms();
            renderQuiz();
        }

        // --- RENDER FUNCTIONS ---

        // 1. Timeline Controls
        function renderTimelineControls() {
            timelineControls.innerHTML = '';
            historyData.forEach((stage, index) => {
                const btn = document.createElement('button');
                btn.className = `flex-1 py-3 px-2 rounded-lg border-2 font-medium text-sm md:text-base transition-all duration-200 flex flex-col items-center gap-1 ${index === 0 ? 'active-stage' : 'inactive-stage'}`;
                btn.innerHTML = `<span class="text-xl">${stage.icon}</span><span>${stage.period}</span><span class="text-xs opacity-80">${stage.name}</span>`;
                btn.onclick = () => handleStageClick(index);
                timelineControls.appendChild(btn);
            });
        }

        // 2. Stage Content & Chart Update
        function handleStageClick(index) {
            currentStageIndex = index;
            
            // Update Buttons
            const buttons = timelineControls.children;
            for (let i = 0; i < buttons.length; i++) {
                if (i === index) {
                    buttons[i].className = buttons[i].className.replace('inactive-stage', 'active-stage');
                } else {
                    buttons[i].className = buttons[i].className.replace('active-stage', 'inactive-stage');
                }
            }

            renderStage(index);
        }

        function renderStage(index) {
            const data = historyData[index];
            
            // Render Text Content
            stageContent.innerHTML = `
                <div>
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-4xl bg-orange-100 p-3 rounded-full">${data.icon}</span>
                        <div>
                            <h3 class="text-2xl font-bold text-gray-800">${data.name}</h3>
                            <p class="text-orange-600 font-medium text-lg">${data.metaphor}</p>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="bg-gray-50 p-3 rounded border-l-4 border-blue-500">
                            <span class="text-xs font-bold text-gray-400 uppercase tracking-wide">æƒ…å¢ƒèƒŒæ™¯</span>
                            <p class="text-gray-700 mt-1">${data.context}</p>
                        </div>
                        
                        <div class="bg-gray-50 p-3 rounded border-l-4 border-green-500">
                            <span class="text-xs font-bold text-gray-400 uppercase tracking-wide">é—œéµç‰¹å¾µ</span>
                            <p class="text-gray-700 mt-1">${data.focus}</p>
                        </div>

                        <div>
                            <span class="text-xs font-bold text-gray-400 uppercase tracking-wide">è€ƒé¡Œé—œéµå­—è¨Šè™Ÿ</span>
                            <div class="flex flex-wrap gap-2 mt-2">
                                ${data.keywords.map(k => `<span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-sm rounded font-medium">${k}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Update Chart
            updateChart(index);
        }

        // 3. Chart Logic
        function updateChart(index) {
            const ctx = document.getElementById('evolutionChart').getContext('2d');
            const data = historyData[index].chartData;

            const chartConfig = {
                type: 'radar',
                data: {
                    labels: ['æ•¸å­¸é‹ç®— (Math)', 'æ¨™æº–æµç¨‹ (Process)', 'ä»¥äººç‚ºæœ¬ (People)', 'åƒ¹å€¼äº¤ä»˜ (Value)'],
                    datasets: [{
                        label: 'ç®¡ç†é‡å¿ƒæ¬Šé‡',
                        data: [data.math, data.process, data.people, data.value],
                        backgroundColor: 'rgba(230, 126, 34, 0.2)',
                        borderColor: 'rgba(230, 126, 34, 1)',
                        pointBackgroundColor: 'rgba(230, 126, 34, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#eee' },
                            grid: { color: '#eee' },
                            suggestedMin: 0,
                            suggestedMax: 100,
                            ticks: { display: false } // Hide numbers for cleaner look
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.raw + '%';
                                }
                            }
                        }
                    }
                }
            };

            if (evolutionChartInstance) {
                evolutionChartInstance.destroy();
            }
            evolutionChartInstance = new Chart(ctx, chartConfig);
        }

        // 4. Terminology
        function renderTerms() {
            pantryGrid.innerHTML = termsData.map(item => `
                <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-orange-300 transition-colors">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-gray-800">${item.term}</h4>
                        <span class="text-xs bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded">${item.tag}</span>
                    </div>
                    <p class="text-sm text-gray-600">${item.desc}</p>
                </div>
            `).join('');
        }

        // 5. Quiz Logic
        function renderQuiz() {
            quizContainer.innerHTML = quizQuestions.map((q, qIndex) => `
                <div class="bg-white p-6 rounded-xl card-shadow border border-gray-100">
                    <div class="flex gap-3 mb-4">
                        <span class="bg-orange-100 text-orange-800 font-bold px-2 py-1 rounded h-fit">Q${qIndex + 1}</span>
                        <h4 class="font-medium text-gray-800 text-lg">${q.q}</h4>
                    </div>
                    <div class="space-y-2 ml-0 md:ml-10">
                        ${q.options.map((opt, oIndex) => `
                            <button onclick="checkAnswer(${qIndex}, ${oIndex}, this)" 
                                class="w-full text-left p-3 rounded border border-gray-200 hover:bg-gray-50 transition-colors flex items-center group quiz-btn-${qIndex}">
                                <div class="w-5 h-5 rounded-full border border-gray-300 mr-3 flex items-center justify-center group-hover:border-gray-400">
                                    <div class="w-2.5 h-2.5 rounded-full bg-transparent transition-colors"></div>
                                </div>
                                ${opt}
                            </button>
                        `).join('')}
                    </div>
                    <div id="feedback-${qIndex}" class="hidden mt-4 ml-0 md:ml-10 p-4 rounded bg-blue-50 text-blue-800 text-sm"></div>
                </div>
            `).join('');
        }

        function checkAnswer(qIndex, selectedOptionIndex, btnElement) {
            const question = quizQuestions[qIndex];
            const feedbackEl = document.getElementById(`feedback-${qIndex}`);
            const allBtns = document.querySelectorAll(`.quiz-btn-${qIndex}`);

            // Reset styles
            allBtns.forEach(btn => {
                btn.classList.remove('bg-green-100', 'border-green-500', 'bg-red-100', 'border-red-500');
                btn.querySelector('div div').classList.remove('bg-gray-600'); 
                btn.disabled = true; // Disable after choice
            });

            if (selectedOptionIndex === question.correct) {
                // Correct
                btnElement.classList.add('bg-green-100', 'border-green-500');
                feedbackEl.innerHTML = `<strong class="text-green-700">ğŸ‰ æ­£ç¢ºï¼</strong><br>${question.hint}`;
                feedbackEl.classList.remove('hidden', 'bg-red-50', 'text-red-800');
                feedbackEl.classList.add('bg-green-50', 'text-green-800');
            } else {
                // Incorrect
                btnElement.classList.add('bg-red-100', 'border-red-500');
                
                // Highlight correct one
                allBtns[question.correct].classList.add('bg-green-50', 'border-green-300');
                
                feedbackEl.innerHTML = `<strong class="text-red-700">âŒ éŒ¯èª¤</strong><br>æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${question.options[question.correct]}<br><br>ğŸ’¡ è§£æï¼š${question.hint}`;
                feedbackEl.classList.remove('hidden', 'bg-green-50', 'text-green-800');
                feedbackEl.classList.add('bg-red-50', 'text-red-800');
            }
        }

        // Start App
        init();

    </script>
</body>
</html>